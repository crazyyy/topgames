function domEL(e,t){for(t=t?"previousSibling":"nextSibling";e&&!e.tagName;)e=e[t];return e}function domNS(e){return domEL((e||{}).nextSibling)}function domPS(e){return domEL((e||{}).previousSibling,1)}function domFC(e){return domEL((e||{}).firstChild)}function domLC(e){return domEL((e||{}).lastChild,1)}function domPN(e){return(e||{}).parentNode}function langNumeric(e,t,o){if(!t||!window.langConfig)return e;var n;if(isArray(t)?(n=t[1],e!=Math.floor(e)?n=t[langConfig.numRules["float"]]:each(langConfig.numRules["int"],function(o,i){if("*"==i[0])return n=t[i[2]],!1;var a=i[0]?e%i[0]:e;return-1!=indexOf(i[1],a)?(n=t[i[2]],!1):void 0})):result=t,o){for(var i=e.toString().split("."),a=[],r=i[0].length-3;r>-3;r-=3)a.unshift(i[0].slice(r>0?r:0,r+3));i[0]=a.join(langConfig.numDel),e=i.join(langConfig.numDec)}return n=(n||"%s").replace("%s",e)}function langSex(e,t){if(!isArray(t))return t;var o=t[1];return window.langConfig?(each(langConfig.sexRules,function(n,i){return"*"==i[0]?(o=t[i[1]],!1):e==i[0]&&t[i[1]]?(o=t[i[1]],!1):void 0}),o):o}function getLang(){try{var e=Array.prototype.slice.call(arguments),t=e.shift();if(!t)return"...";var o=window.lang&&window.lang[t]||window.langpack&&window.langpack[t]||window[t];if(!o){var n=t.split("_");return n.shift(),n.join(" ")}return isFunction(o)?o.apply(null,e):isArray(o)?langNumeric(e[0],o):o}catch(i){debugLog("lang error:"+i.message+"("+Array.prototype.slice.call(arguments).join(", ")+")")}}function ge(){for(var e,t=0;t<arguments.length;t++){var o=arguments[t];if(("string"==typeof o||"number"==typeof o)&&(o=document.getElementById(o)),1==arguments.length)return o;e||(e=new Array),e.push(o)}return e}function debugLog(e){try{var t=(new Date).getTime(),o="["+(t-_logTimer)/1e3+"] ";return ge("debuglog")&&(null===e?e="[NULL]":void 0===e&&(e="[UNDEFINED]"),ge("debuglog").innerHTML+=o+e.toString().replace("<","&lt;").replace(">","&gt;")+"<br/>"),window.console&&console.log&&console.log(o+e),t}catch(n){return 0}}function geByClass(e,t,o){var n=new Array;if(null==t&&(t=document),null==o&&(o="*"),t.getElementsByClassName){if(n=t.getElementsByClassName(e),"*"!=o)for(i=0;i<n.length;i++)n.nodeName==o&&n.splice(i,1);return n}var a=t.getElementsByTagName(o),r=a.length,s=new RegExp("(^|\\s)"+e+"(\\s|$)");for(i=0,j=0;i<r;i++)s.test(a[i].className)&&(n[j]=a[i],j++);return n}function geByClass1(e,t,o){return t=t||document,o=o||"*",t.querySelector&&t.querySelector(o+"."+e)||geByClass(e,t,o)[0]}function ce(e,t,o){var n=document.createElement(e);return t&&extend(n,t),o&&setStyle(n,o),n}function se(e){return ce("div",{innerHTML:e}).firstChild}function show(e){if(arguments.length>1)for(var t=0;t<arguments.length;t++)show(arguments[t]);else if(e=ge(e)){var o=data(e,"olddisplay");e.style.display=o||"","none"==getStyle(e,"display")&&(e.style.display="tr"!=e.tagName.toLowerCase()||browser.msie?"table"!=e.tagName.toLowerCase()||browser.msie?data(e,"olddisplay","block"):"table":"table-row")}}function hide(e){if(arguments.length>1)for(var t=0;t<arguments.length;t++)hide(arguments[t]);else e=ge(e),e&&("none"!=getStyle(e,"display")&&data(e,"olddisplay",e.style.display),e.style.display="none")}function isVisible(e){return e=ge(e),"none"!=getStyle(e,"display")&&"hidden"!=getStyle(e,"visibility")}function toggle(e,t){void 0===t&&(t=!isVisible(e)),t?show(e):hide(e)}function toggleFlash(e,t){if(clearTimeout(hfTimeout),t>0)return void(hfTimeout=setTimeout(function(){toggleFlash(e,0)},t));var o=e?"visible":"hidden",n=document.getElementsByTagName("body")[0],i=function(){this.getAttribute("preventhide")||("extra_player"==this.id&&browser.chrome||"app_container"==this.id&&browser.msie?e?setStyle(this,{position:"static",top:0}):setStyle(this,{position:"absolute",top:"-5000px"}):this.style.visibility=o)};each(n.getElementsByTagName("embed"),i),each(n.getElementsByTagName("object"),i);var a=ge("extra_player");a&&i.apply(a);var r=ge("banner1"),s=ge("banner2");r&&(r.style.visibility=o),s&&(s.style.visibility=o)}function getXY(e,t){if(e&&void 0!=e){var o,n,i=0,a=0,r=document.getElementsByTagName("body")[0],s=document.getElementsByTagName("html")[0];if(e.offsetParent)do i+=n=e.offsetLeft,a+=e.offsetTop,o=getStyle(e,"position"),("fixed"==o||"absolute"==o||"relative"==o&&"page_wrap"==e.id)&&(i-=e.scrollLeft,a-=e.scrollTop,"fixed"!=o||t||(i+=(e.offsetParent||{}).scrollLeft||r.scrollLeft||s.scrollLeft,a+=(e.offsetParent||{}).scrollTop||r.scrollTop||s.scrollTop));while(e=e.offsetParent);return t&&browser.msie&&intval(browser.version)<9&&n&&(i+=ge("page_layout").offsetLeft),[i,a]}}function getSize(e,t){function o(){if(n=[e.offsetWidth,e.offsetHeight],t){each(n,function(t,o){var i=t?["Top","Bottom"]:["Left","Right"];each(i,function(){n[t]-=parseFloat(getStyle(e,"padding"+this))||0,n[t]-=parseFloat(getStyle(e,"border"+this+"Width"))||0})}),n=[Math.round(n[0]),Math.round(n[1])]}}var n=[0,0];if(e==document)n=[Math.max(document.documentElement.clientWidth,document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth),Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)];else if(e)if(isVisible(e))o();else{var i={position:"absolute",visibility:"hidden",display:"block"},a={};each(i,function(t,o){a[t]=e.style[t],e.style[t]=o}),o(),each(i,function(t,o){e.style[t]=a[t]})}return n}function getScroll(){var e=browser.msie6?ge("PageContainer"):document.body,t=document.documentElement;return[e.scrollLeft||t.scrollLeft||window.pageXOffset||0,e.scrollTop||t.scrollTop||window.pageYOffset||0,t.clientWidth||e.clientWidth||0,t.clientHeight||e.clientHeight||0]}function getZoom(){var e=ge("zoom_test_1")||document.body.appendChild(ce("div",{id:"zoom_test_1"},{left:"10%",position:"absolute",visibility:"hidden"})),t=ge("zoom_test_2")||document.body.appendChild(ce("div",{id:"zoom_test_2"},{left:e.offsetLeft+"px",position:"absolute",visibility:"hidden"}));return t.offsetLeft/e.offsetLeft}function rand(e,t){return Math.random()*(t-e+1)+e}function isFunction(e){return"[object Function]"===Object.prototype.toString.call(e)}function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)}function isEmpty(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function vkNow(){return+new Date}function vkImage(){return window.Image?new Image:ce("img")}function trim(e){return(e||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")}function stripHTML(e){return e?e.replace(/<(?:.|\s)*?>/g,""):""}function escapeRE(e){return e?e.replace(/[.*+?^${}()|[\]\/\\]/g,"\\$0"):""}function intval(e){return e===!0?1:isNaN(parseInt(e,10))?0:parseInt(e,10)}function winToUtf(e){var t,o,n;t=e.match(/&#[0-9]{2}[0-9]*;/gi);for(o in t){var i=""+t[o];n=intval(i.substr(2,i.length-3)),n>=32&&"&#"+i.replace(/[^0-9]/g,"")+";"==i&&(e=e.replace(i,String.fromCharCode(n)))}return e=e.replace(/&quot;/gi,'"').replace(/&amp;/gi,"&").replace(/&lt;/gi,"<").replace(/&gt;/gi,">")}function replaceEntities(e){return se("<textarea>"+e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+"</textarea>").value}function clean(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function each(e,t){var o,n=0,i=e.length;if(void 0===i){for(o in e)if(t.call(e[o],o,e[o])===!1)break}else for(var a=e[0];i>n&&t.call(a,n,a)!==!1;a=e[++n]);return e}function indexOf(e,t,o){o=null==o?0:o;for(var n=e.length,i=o;n>i;i++)if(e[i]==t)return i;return-1}function inArray(e,t){for(var o=0;o<t.length;o++)if(t[o]==e)return!0;return!1}function clone(e){var t=isArray(e)?[]:{};for(var o in e)t[o]=e[o];return t}function extend(){var e,t=arguments[0]||{},o=1,n=arguments.length,i=!1;if("boolean"==typeof t&&(i=t,t=arguments[1]||{},o=2),"object"==typeof t||isFunction(t)||(t={}),n==o)return t;for(;n>o;o++)if(null!=(e=arguments[o]))for(var a in e){var r=t[a],s=e[a];t!==s&&(i&&s&&"object"==typeof s&&!s.nodeType?t[a]=extend(i,r||(null!=s.length?[]:{}),s):void 0!==s&&(t[a]=s))}return t}function hasClass(e,t){return e=ge(e),e&&new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)}function addClass(e,t){e=ge(e),e&&!hasClass(e,t)&&(e.className=trim(e.className+" "+t))}function removeClass(e,t){e=ge(e),e&&hasClass(e,t)&&(e.className=trim(e.className.replace(new RegExp("(\\s+|^)"+t+"(\\s+|$)")," ")))}function toggleClass(e,t,o){void 0===o&&(o=!hasClass(e,t)),(o?addClass:removeClass)(e,t)}function btnOut(e){removeClass(geByClass("box_button",e)[0],"button_hover")}function btnOver(e){addClass(geByClass("box_button",e)[0],"button_hover")}function getStyle(e,t,o){if(e=ge(e),void 0===o&&(o=!0),!o&&"opacity"==t&&browser.msie){var n=e.style.filter;return n?n.indexOf("opacity=")>=0?parseFloat(n.match(/opacity=([^)]*)/)[1])/100+"":"1":""}if(!o&&e.style&&(e.style[t]||"height"==t))return e.style[t];if(o&&("width"==t||"height"==t))return getSize(e,!0)[{width:0,height:1}[t]]+"px";var i,a=document.defaultView||window;if(a.getComputedStyle){t=t.replace(/([A-Z])/g,"-$1").toLowerCase();var r=a.getComputedStyle(e,null);r&&(i=r.getPropertyValue(t))}else if(e.currentStyle){if("opacity"==t&&browser.msie){var n=e.currentStyle.filter;return n&&n.indexOf("opacity=")>=0?parseFloat(n.match(/opacity=([^)]*)/)[1])/100+"":"1"}var s=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()});if(i=e.currentStyle[t]||e.currentStyle[s],"auto"==i&&(i=0),!/^\d+(px)?$/i.test(i)&&/^\d/.test(i)){var c=style.left,l=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,style.left=i||0,i=style.pixelLeft+"px",style.left=c,e.runtimeStyle.left=l}}return"rgba(0, 0, 0, 0)"==i&&(i="transparent"),i}function setStyle(e,t,o){if(e=ge(e)){if("object"==typeof t)return each(t,function(t,o){setStyle(e,t,o)});if("opacity"==t)browser.msie&&(e.style.filter=(o+"").length?"alpha(opacity="+100*o+")":"",e.style.zoom=1),e.style.opacity=o;else{var n="number"==typeof o&&!/z-?index|font-?weight|opacity|zoom|line-?height/i.test(t);n&&0>o&&/^(width|height)$/i.test(t)&&(o=0),e.style[t]=n?o+"px":o}}}function swapStyle(e,t,o){e=ge(e);var n={};for(var i in t)n[i]=e.style[i],e.style[i]=t[i];o.call(e);for(var i in t)e.style[i]=n[i]}function data(e,t,o){if(!e)return!1;var n,i=e[expand];return i||(i=e[expand]=++vk_uuid),t&&!vk_cache[i]&&(vk_cache[i]={}),o!==n&&(vk_cache[i][t]=o),t?vk_cache[i][t]:i}function removeData(e,t){if(!e)return!1;var o=e[expand];if(t){if(vk_cache[o]){delete vk_cache[o][t],t="";for(t in vk_cache[o])break;t||removeData(e)}}else{try{delete e[expand]}catch(n){e.removeAttribute&&e.removeAttribute(expand)}delete vk_cache[o]}}function animate(e,t,o,n){e=ge(e);var i,a=extend({},"object"==typeof o?o:{duration:o,onComplete:n||function(){}}),r={},s={},c=isVisible(e);a.orig={},t=clone(t);var l=data(e,"tween"),d=c?"hide":"show";l&&l.isTweening&&(a.orig=extend(a.orig,l.options.orig),l.stop(!1),l.options.show?d="hide":l.options.hide&&(d="show"));for(i in t){if(!l&&("show"==t[i]&&c||"hide"==t[i]&&!c))return a.onComplete.call(this,e);if("height"!=i&&"width"!=i||!e.style||(void 0==a.orig.overflow&&(a.orig.overflow=getStyle(e,"overflow")),e.style.overflow="hidden",hasClass(e,"inl_bl")||(e.style.display="block")),/show|hide|toggle/.test(t[i]))if("toggle"==t[i]&&(t[i]=d),"show"==t[i]){var u=0;a.show=!0,void 0==a.orig[i]&&(a.orig[i]=getStyle(e,i,!1)||"",setStyle(e,i,0));var h={};"height"==i&&browser.msie6?(h[i]="0px",e.style.overflow=""):h[i]=a.orig[i],swapStyle(e,h,function(){t[i]=parseFloat(getStyle(e,i,!0))}),"height"==i&&browser.msie&&(e.style.overflow="hidden")}else void 0==a.orig[i]&&(a.orig[i]=getStyle(e,i,!1)||""),a.hide=!0,t[i]=0}return a.show&&!c&&show(e),l=new Fx.Base(e,a,null),each(t,function(t,o){if(/backgroundColor|borderBottomColor|borderLeftColor|borderRightColor|borderTopColor|color|borderColor|outlineColor/.test(t)){var n="borderColor"==t?"borderTopColor":t;u=getColor(e,n),o=getRGB(o)}else{{var i=o.toString().match(/^([+-]=)?([\d+-.]+)(.*)$/);l.cur(t,!0)||0}i&&(o=parseFloat(i[2]),i[1]&&(o=("-="==i[1]?-1:1)*o+o)),a.hide&&"height"==t&&browser.msie6&&(e.style.height="0px",e.style.overflow=""),u=l.cur(t,!0),a.hide&&"height"==t&&browser.msie6&&(e.style.height="",e.style.overflow="hidden"),0!=u||"width"!=t&&"height"!=t||(u=1),"opacity"==t&&o>0&&!c&&(setStyle(e,"opacity",0),u=0,show(e))}(u!=o||isArray(u)&&u.join(",")==o.join(","))&&(r[t]=u,s[t]=o)}),l.start(r,s),data(e,"tween",l),l}function fadeTo(e,t,o,n){return animate(e,{opacity:o},t,n)}function genFx(e,t){var o={};return each(Fx.Attrs.concat.apply([],Fx.Attrs.slice(0,t)),function(){o[this]=e}),o}function getRGB(e){var t;return e&&isArray(e)&&3==e.length?e:(t=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))?[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]:(t=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))?[2.55*parseFloat(t[1]),2.55*parseFloat(t[2]),2.55*parseFloat(t[3])]:(t=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:(t=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))?[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]:void 0}function getColor(e,t){var o;do{if(o=getStyle(e,t),""!=o&&"transparent"!=o||"body"==e.nodeName.toLowerCase())break;t="backgroundColor"}while(e=e.parentNode);return getRGB(o)}function scrollToTop(e,t){void 0==e&&(e=400),t=t?isNaN(parseInt(t,10))?getXY(ge(t))[1]:t:0,e?(animate(document.getElementsByTagName("html")[0],{scrollTop:t},e),animate(document.getElementsByTagName("body")[0],{scrollTop:t},e)):window.scroll(0,t)}function addEvent(e,t,o,n,i){if(e=ge(e),e&&3!=e.nodeType&&8!=e.nodeType){var a=i?function(e){var t=e.data;e.data=i;var n=o.apply(this,[e]);return e.data=t,n}:o;e.setInterval&&e!=window&&(e=window);var r=data(e,"events")||data(e,"events",[]),s=data(e,"handle")||data(e,"handle",function(){_eventHandle.apply(arguments.callee.elem,arguments)});s.elem=e,each(t.split(/\s+/),function(t,o){var i=r[o];i||(i=r[o]=new Array,!n&&e.addEventListener?e.addEventListener(o,s,!1):!n&&e.attachEvent&&e.attachEvent("on"+o,s)),i.push(a)}),e=null}}function triggerEvent(e,t,o){var n=data(e,"handle");n&&setTimeout(function(){n.call(e,extend(o||{},{type:t,target:e}))},0)}function removeEvent(e,t,o){if(e=ge(e)){var n=data(e,"events");if(n)if("string"==typeof t)each(t.split(/\s+/),function(t,i){if(isArray(n[i])){if(isFunction(o)){for(var a=0;a<n[i].length;a++)if(n[i][a]==o){delete n[i][a];break}}else for(var a=0;a<n[i].length;a++)delete n[i][a];for(var r in n[i])break;r||(e.removeEventListener?e.removeEventListener(i,data(e,"handle"),!1):e.detachEvent&&e.detachEvent("on"+i,data(e,"handle")),r=null,delete n[i])}});else for(var i in n)removeEvent(e,i)}}function cancelEvent(e){if(e){var t=e.originalEvent||e;try{t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()}catch(o){}return t.cancelBubble=!0,t.returnValue=!1,!1}}function checkEvent(e){return(e=e||window.event)&&("click"==e.type||"mousedown"==e.type||"mouseup"==e.type)&&(e.which>1||e.button>1||e.ctrlKey||e.shiftKey||browser.mac&&e.metaKey)}function _eventHandle(e){e=e||window.event;var t=e;if(e=clone(t),e.originalEvent=t,e.target||(e.target=e.srcElement||document),e.currentTarget||(e.currentTarget=this),3==e.target.nodeType&&(e.target=e.target.parentNode),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement==e.target),null==e.pageX&&null!=e.clientX){var o=document.documentElement,n=document.body;e.pageX=e.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o.clientLeft||0),e.pageY=e.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o.clientTop||0)}!e.which&&(e.charCode||0===e.charCode?e.charCode:e.keyCode)&&(e.which=e.charCode||e.keyCode),!e.metaKey&&e.ctrlKey&&(e.metaKey=e.ctrlKey),!e.which&&e.button&&(e.which=1&e.button?1:2&e.button?3:4&e.button?2:0);var i=data(this,"events");if(i&&"string"==typeof e.type&&i[e.type]&&i[e.type].length)for(var a in i[e.type]||[]){if("mouseover"==e.type||"mouseout"==e.type){for(var r=e.relatedElement;r&&r!=this;)try{r=r.parentNode}catch(s){r=this}if(r==this)continue}var c=i[e.type][a].apply(this,arguments);c===!1&&cancelEvent(e)}}function tnActive(e){window.tnAct=e,addClass(e,"active")}function tnInactive(){removeClass("top_logo_down","tld_d"),removeClass(window.tnAct,"active")}function serializeForm(e){if("object"!=typeof e)return!1;var t={},o=function(t){return e.getElementsByTagName(t)},n=function(o,n){n.name&&(t[n.name]=browser.msie&&!n.value&&e[n.name]?e[n.name].value:n.value)};return each(o("input"),function(e,t){return"radio"!=t.type&&"checkbox"!=t.type||t.checked?n(e,t):void 0}),each(o("select"),n),each(o("textarea"),n),t}function ajx2q(e){var t=[],o=0;for(var n in e)if(void 0!==e[n]&&null!==e[n]&&"function"!=typeof e[n])if(isArray(e[n]))for(var o=0;o<e[n].length;++o)void 0!==e[n][o]&&null!==e[n][o]&&"function"!=typeof e[n][o]&&t.push(encodeURIComponent(n)+"[]="+encodeURIComponent(e[n][o]));else t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}function q2o(e){var t=e;if("string"==typeof e){var o,n,i=e.split("&");for(t={},n=0;n<i.length;n++)o=i[n].split("="),t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}function Ajax(onDone,onFail,eval_res){var _t=this;this.onDone=onDone,this.onFail=onFail;var tram=null;try{tram=new XMLHttpRequest}catch(e){tram=null}if(!tram)try{tram||(tram=new ActiveXObject("Msxml2.XMLHTTP"))}catch(e){tram=null}if(!tram)try{tram||(tram=new ActiveXObject("Microsoft.XMLHTTP"))}catch(e){tram=null}var readystatechange=function(e,t){4==tram.readyState&&(tram.status>=200&&tram.status<300?(eval_res&&parseRes(),_t.onDone&&_t.onDone(extend(_t,{url:e,data:t}),tram.responseText)):(_t.status=tram.status,_t.readyState=tram.readyState,_t.onFail&&_t.onFail(extend(_t,{url:e,data:t}),tram.responseText)))},parseRes=function(){if(tram&&tram.responseText){var res=tram.responseText.replace(/^[\s\n]+/g,"");if("<noscript>"==res.substr(0,10))try{var arr=res.substr(10).split("</noscript>");eval(arr[0]),tram.responseText=arr[1]}catch(e){debugLog("eval ajax script:"+e.message)}}};this.get=function(e,t,o){tram.onreadystatechange=function(){readystatechange(e,t)},o=o||!1;var n="string"!=typeof t?ajx2q(t):t;e+=n?"?"+n:"",tram.open("GET",e,!o),tram.setRequestHeader("X-Requested-With","XMLHttpRequest"),tram.send("")},this.post=function(e,t,o){tram.onreadystatechange=function(){readystatechange(e,t)},o=o||!1;var n="string"!=typeof t?ajx2q(t):t;try{tram.open("POST",e,!o)}catch(i){debugLog("ajax post error: "+i.message)}tram.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),tram.setRequestHeader("X-Requested-With","XMLHttpRequest"),tram.send(n)}}function activate_mobile(e,t,o){e&&(t=function(){Ajax._captchaBox.show(),window.need_mobile_act||triggerEvent(ge("captchaKey"),"keypress",{keyCode:13})}),showBox("activate_mobile","activation.php",{act:"activate_mobile_box",hash:o},!1,!0,{type:"POPUP",hideOnClick:!1,progress:"activate_progress",onHide:t},["css/al/reg.css"])}function showCaptcha(e,t,o,n,i){void 0===window.Ajax._captchaBox&&(window.Ajax._captchaBox=new MessageBox({title:getLang("captcha_enter_code"),width:300}));var a=window.Ajax._captchaBox;a.removeButtons();var r,s="",c=function(){removeEvent(r,"keypress"),o(e,r.value),hide("captchaKey"),show("captchaLoader")};1!=window.need_mobile_act||ge("please_confirm_mail")||(s=global_try_to_activate.replace("{link}",'<a href="javascript: activate_mobile(true)">').replace("{/link}","</a>"),s='<div style="text-align: center; font-size: 10px; padding-top: 5px; line-height: 15px;">'+s+"</span>"),a.addButton({label:getLang("captcha_cancel"),style:"button_no",onClick:function(){removeEvent(r,"keypress"),a.hide()}}),a.addButton({label:getLang("captcha_send"),onClick:c}),a.setOptions({onHide:i,bodyStyle:"padding: 16px 14px"+(s.length?" 10px":"")}),a.content('<div style="text-align: center; height: 76px"><a href="#" id="refreshCaptcha"><img id="captchaImg" class="captchaImg" src="'+t+'"/></a><div></div><input id="captchaKey" class="inputText" name="captcha_key" type="text" style="width: 120px; margin: 3px 0px 0px;" maxlength="7"/><img id="captchaLoader" src="'+base_domain+'images/progress7.gif" style="display:none; margin-top: 13px;" /></div>'+s),a.show(),isFunction(n)&&n(),r=ge("captchaKey"),addEvent(r,"keypress",function(e){13==e.keyCode&&c()}),addEvent(ge("refreshCaptcha"),"click",c),r.focus()}function _initCookies(){_cookies={};for(var e=document.cookie.split(";"),t=/^[\s]*([^\s]+?)$/i,o=0;o<e.length;o++){var n=e[o].split("=");2==n.length&&(_cookies[n[0].match(t)[1]]=unescape(n[1].match(t)?n[1].match(t)[1]:""))}}function getCookie(e){return _cookies||_initCookies(),_cookies[e]}function setCookie(e,t,o){if(_cookies||_initCookies(),_cookies[e]=t,o){var n=new Date;n.setTime(n.getTime()+24*o*60*60*1e3);var i="; expires="+n.toGMTString()}else var i="";var a=location.host.match(/[^.]+\.[^.]+$/);document.cookie=e+"="+escape(t)+i+"; path=/"+(a?"; domain=."+a:"")}function callHub(e,t){this.count=t||1,this.done=function(t){this.count-=t||1,this.count<=0&&e()}}function dispatchIntro(e,t){"undefined"!=typeof dispatchIntroEvent&&dispatchIntroEvent(e,t)}function attachScript(e,t){var o=t.substr(t.indexOf("/")+1,t.indexOf(".")-t.indexOf("/")+2).replace(/[\/\.]/g,"_"),n=[];for(reqnum in reqs)req=reqs[reqnum],req&&(0==req.running?(ge("req"+req.num).parentNode.removeChild(ge("req"+req.num)),reqs[reqnum]=null):n[reqnum]=req);reqs=n,document.getElementsByTagName("head")[0].appendChild(ce("script",{id:e,type:"text/javascript",src:(/^http:\/\//i.test(t)||/^\//i.test(t)?"":base_domain)+t+(css_versions[o]?"?"+css_versions[o]:"")}))}function destroy(){reqs[this.num]&&(reqs[this.num].running=0)}function addCss(e){var t=e.substr(e.indexOf("/")+1,e.indexOf(".")-e.indexOf("/")-1)+"_css";ge(t)||document.getElementsByTagName("head")[0].appendChild(ce("link",{type:"text/css",rel:"stylesheet",href:base_domain+e+(css_versions[t]?"?"+css_versions[t]:""),id:t,media:"screen"}))}function showRateVotesBox(){return!window.event||2!=window.event.which&&1!=window.event.button?(addCss("css/privacy.css"),addCss("css/wiki.css"),void 0==rateBox&&(rateBox=new MessageBox({title:getLang("global_rating_box_header"),bodyStyle:"padding:0px",width:"480px",progress:"rateProgress"})),rateBox.removeButtons(),rateBox.addButton({onClick:function(){rateBox.hide(200)},label:getLang("box_close")}),rateBox.loadContent("rate.php",{act:"a_get_rate_votes",full:1},!0).show(),!1):!0}function leftBlockOver(e){var t=1;e.id||(e=ge("left_hide"+e),t=0),(t||!e.timer)&&(e.showing?delete e.showing:(animate(e,{opacity:t?1:.5},200),t&&(e.showing=1))),e.timer&&(clearTimeout(e.timer),delete e.timer)}function leftBlockOut(e){var t=.5;e.id||(e=ge("left_hide"+e),t=0),e.timer=setTimeout(function(){animate(e,{opacity:t},200),delete e.timer},1)}function leftBlockHide(e,t){ajax.post("al_index.php",{act:"hide_block",block:e,hash:t}),hide("left_block"+e)}function parseLatin(e,t){for(var o=e,n=["yo","zh","kh","ts","ch","sch","shch","sh","eh","yu","ya","YO","ZH","KH","TS","CH","SCH","SHCH","SH","EH","YU","YA","'"],i=["�","�","�","�","�","�","�","�","�","�","�","�","�","�","�","�","�","�","�","�","�","�","�"],a=0;a<n.length;a++)o=t?o.split(i[a]).join(n[a]):o.split(n[a]).join(i[a]);for(var r="abvgdezijklmnoprstufhcyABVGDEZIJKLMNOPRSTUFHCY��",s="������������������������������������������������",a=0;a<r.length;a++)o=t?o.split(s.charAt(a)).join(r.charAt(a)):o.split(r.charAt(a)).join(s.charAt(a));return o==e?null:o}function placeholderSetup(e){var t=ge(e);if(t){if(browser.opera&&browser.mobile)return t.getValue=function(){return t.value},void(t.setValue=function(e){t.value=e});var o=t.getAttribute("placeholder"),n=getStyle(t,"color")||"#777";!t.phevents&&o&&""!=o&&(t.active=1,t.value&&t.value!=o||t.focused||(t.style.color=n,t.value=o,t.active=0),addEvent(t,"focus",function(){t.active||(t.active=1,t.value="",t.style.color="#000")}),addEvent(t,"blur",function(){t.active&&o&&""==t.value&&(t.active=0,t.style.color=n,t.value=o)}),t.getValue=function(){return t.active||t.value!=o?t.value:""},t.setValue=function(e){t.active=e?1:0,t.value=e?e:o,t.style.color=e?"#000":n},t.phevents=1)}}function setSelRange(e,t,o){var n=ge(e);if(n&&("text"==n.type.toLowerCase()||"password"==n.type.toLowerCase()||"textarea"==n.tagName.toLowerCase()))if(n.focus(),n.createTextRange){var i=n.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",o),i.select()}else n.setSelectionRange&&n.setSelectionRange(t,o)}function focusAtEnd(e){var t=ge(e);!t||"text"!=t.type&&"password"!=t.type&&"textarea"!=t.tagName.toLowerCase()||setSelRange(t,t.value.length,t.value.length)}function MessageBox(options){function refreshCoords(){var e=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.offsetHeight;containerSize=getSize(boxContainer);var t=Math.max(intval(window.pageYOffset),document.documentElement.scrollTop,body.scrollTop);if(!t&&window.parent&&window.parent!=window&&window._currentFocusEl)var o=getXY(window._currentFocusEl)[1];else var o=Math.max(0,t+(e-containerSize[1])/3);boxContainer.style.top=o+"px",boxContainer.style.marginLeft=-containerSize[0]/2+"px"}function addButton(e){buttonsCount++,"object"!=typeof e&&(e={}),e=extend({label:"Button"+buttonsCount,style:"button_blue"},e),"button_no"==e.style&&(e.style="button_gray"),"button_yes"==e.style&&(e.style="button_blue");var t=ce("div",{className:e.style+" fl_r",innerHTML:'<button id="button'+guid+"_"+buttonsCount+'">'+e.label+"</button>"});return boxProgress?boxControls.insertBefore(t,boxProgress):boxControls.appendChild(t),createButton(t.firstChild,e.onClick),t}function addControlsText(e){var t=ce("div",{className:"controls_wrap",innerHTML:e});return boxControls.appendChild(t),t}function removeButtons(){var e=[];buttonsCount=0,each(boxControls.childNodes,function(t,o){!o||boxProgress&&o==boxProgress||(removeEvent(o),e.push(o))}),each(e,function(){boxControls.removeChild(this)})}function refreshBox(){switch(boxTitle.innerHTML=options.title,boxContainer.style.width="string"==typeof options.width?options.width:options.width+"px",boxContainer.style.height="string"==typeof options.height?options.height:options.height+"px",removeClass(boxContainer,"box_no_controls"),removeClass(boxContainer,"message_box"),removeEvent(boxContainer,"click"),options.hideOnClick&&"POPUP"==options.type&&addEvent(boxContainer,"click",function(){hideBox()}),options.type){case"POPUP":addClass(boxContainer,"box_no_controls"),options.hideOnClick&&addEvent(transparentBG,"click",function(){hideBox()});break;case"MESSAGE":options.hideOnOutClick?addEvent(transparentBG,"click",function(){hideBox()}):removeEvent(transparentBG,"click"),addClass(boxContainer,"message_box")}}function showBox(){if(!isVisible){if(isVisible=!0,hiddenBox=0,_message_box_shown&&_message_boxes[_message_box_shown].isVisible){var e=_message_boxes[_message_box_shown];options.returnHidden?(hiddenBox=_message_box_shown,e.hideContainer()):e.hide()}show(boxContainer),refreshCoords(),_message_box_shown||(transparentBG.style.height=getSize(document)[1]+"px",show(transparentBG),clearTimeout(_doc_block_timeout),_doc_blocked||(_doc_blocked=!0,triggerEvent(document,"block"))),_message_box_shown=guid,options.onShow&&options.onShow()}}function hideBox(e){if(isVisible&&(!options.onHideAttempt||options.onHideAttempt())){isVisible=!1;var t=function(){hide(boxContainer);var e=!1;options.returnHidden&&hiddenBox&&(_message_boxes[hiddenBox].showContainer(),_message_box_shown=hiddenBox,e=!0),e||(_message_box_shown=0,hide(transparentBG),clearTimeout(_doc_block_timeout),_doc_blocked&&(_doc_block_timeout=setTimeout(function(){_doc_blocked=!1,triggerEvent(document,"unblock")},50))),options.onHide&&options.onHide()};e>0?fadeOut(boxContainer,e,t):t()}}function onLoadError(e){boxBody.innerHTML="Error: "+e,removeButtons(),addButton({label:getLang("box_close"),onClick:hideBox}),refreshCoords(),isFunction(options.onLoadError)&&options.onLoadError(e)}var defaults={type:"MESSAGE",hideOnClick:!0,title:"Alert",width:"410px",height:"auto",bodyStyle:"",closeButton:!1,fullPageLink:"",progress:!1,returnHidden:!1};options=extend(defaults,options);var buttonsCount=0,body=document.getElementsByTagName("body")[0],transparentBG,boxContainer,boxBG,boxContainer,boxLayout,boxTitle,boxBody,boxControls,boxProgress,buttonYes,buttonNo,boxCloseButton,boxFullPageLink,guid=++_message_box_guid,isVisible=!1,hiddenBox;transparentBG=ge("popupTransparentBG"),transparentBG||(transparentBG=ce("div",{id:"popupTransparentBG",className:"popup_transparent_bg"},{display:"none",height:getSize(document)[1]}),addEvent(window,"resize",function(){transparentBG.style.height=getSize(document)[1]+"px"}),onDomReady(function(){body.appendChild(transparentBG)}));var x_button=options.closeButton?'<div class="box_x_button"></div>':"",full_page_button=options.fullPageLink?'<a onfocus="this.blur()" class="box_full_page_link" href="'+options.fullPageLink+'"></a>':"";boxContainer=ce("div",{className:"popup_box_container",innerHTML:'<div class="box_layout"><div class="box_title_wrap">'+x_button+full_page_button+'<div class="box_title"></div></div><div class="box_body" style="'+options.bodyStyle+'"></div><div class="box_controls_wrap"><div class="box_controls"></div></div></div>'},{display:"none"}),boxLayout=geByClass("box_layout",boxContainer)[0],boxTitle=geByClass("box_title",boxContainer)[0],boxBody=geByClass("box_body",boxContainer)[0],boxControls=geByClass("box_controls",boxContainer)[0],boxCloseButton=options.closeButton?geByClass("box_x_button",boxContainer)[0]:!1,boxFullPageLink=options.fullPageLink?geByClass("box_full_page_link",boxContainer)[0]:!1,options.progress?(boxControls.innerHTML='<img src="'+base_domain+"images/upload"+(window.devicePixelRatio>=2?"_2x":"")+'.gif" width="32" height="8" id="'+options.progress+'" style="display: none" />',boxProgress=boxControls.firstChild):boxProgress=null,addEvent(document,"keydown",function(e){27==e.keyCode&&hideBox()}),_message_boxes.length||addEvent(document,"block unblock",function(e){toggleFlash("unblock"==e.type)}),onDomReady(function(){body.appendChild(boxContainer),refreshBox(),refreshCoords()});var fadeToColor=function(e){return function(){animate(this,{backgroundColor:e},200)}};boxCloseButton&&(addEvent(boxCloseButton,"mouseover",fadeToColor("#FFFFFF")),addEvent(boxCloseButton,"mouseout",fadeToColor("#9DB7D4")),addEvent(boxCloseButton,"click",hideBox)),boxFullPageLink&&(addEvent(boxFullPageLink,"mouseover",fadeToColor("#FFFFFF")),addEvent(boxFullPageLink,"mouseout",fadeToColor("#9DB7D4")));var retBox={guid:guid,show:function(e){return showBox(e),this},hide:function(e){return hideBox(e),this},isVisible:function(){return isVisible},content:function(e){return boxBody.innerHTML=e,refreshCoords(),this},loadContent:function(url,params,evaluate,loader_style,noloader){var st=loader_style?loader_style:"";noloader||(boxBody.innerHTML='<div class="box_loader" style="'+st+'"></div>'),"object"!=typeof params&&(params={});var self=this;return Ajax.Send(url,params,{onSuccess:function(ajaxObj,responseText){if(evaluate)try{var result=eval("("+responseText+")");boxBody.innerHTML=result.html?result.html:"",result.script&&(window.execScript?window.execScript(result.script):eval.call(window,result.script))}catch(e){return onLoadError(responseText)}else boxBody.innerHTML=responseText;refreshCoords(),isFunction(options.onLoad)&&options.onLoad(responseText)},onFail:function(e,t){onLoadError("Request error occured.")}}),this},addButton:function(e){var t=addButton(e);return e.returnBtn?t:this},addControlsText:function(e){var t=addControlsText(e);return options.returnBtn?t:this},removeButtons:function(e){return removeButtons(),this},setOptions:function(e){if(options=extend(options,e),"bodyStyle"in e)for(var t=options.bodyStyle.split(";"),o=0;o<t.length;++o){var n=t[o].split(":");n.length>1&&n[0].length&&(boxBody.style[trim(n[0])]=trim(n[1]),
boxBody.style.setProperty&&boxBody.style.setProperty(trim(n[0]),trim(n[1]),""))}return options.fullPageLink&&boxFullPageLink&&(boxFullPageLink.href=options.fullPageLink),refreshBox(),refreshCoords(),this},fixIE6:refreshBox,hideContainer:function(){isVisible=!1,hide(boxContainer)},showContainer:function(){isVisible=!0,show(boxContainer)},body:function(){return boxBody}};return _message_boxes[guid]=retBox,retBox}function getShownBox(){var e=_message_boxes[_message_box_shown];return e&&e.isVisible?e:!1}function AlertBox(e,t,o,n){var i=new MessageBox({title:e});return"object"==typeof n?i.setOptions(n):n={},i.removeButtons(),"CONFIRM"==n.boxType?i.addButton({label:n.no||getLang("box_no"),style:"button_no",onClick:i.hide}).addButton({label:n.yes||getLang("box_yes"),onClick:function(){isFunction(o)&&o()===!1||i.hide()}}):i.addButton({label:n.no||getLang("box_close"),onClick:isFunction(o)?function(){i.hide(),o()}:i.hide}),i.content(t)}function TabbedBox(curTab,tabs,options){function sh(e,t,o){return noTab?"":'<div class="mb_shadow'+(o||"")+'" style="opacity:'+e/100+";filter:alpha(opacity="+e+");margin-top:"+t+"px;width:"+w+'px"></div>'}function err(e){contentBox.innerHTML=e}function es(e){window.execScript?window.execScript(e):eval.call(window,e)}options.bodyStyle="padding:0;";var mb=options.onDone?new AlertBox(options.title||"","",options.onDone,extend(options,{boxType:"CONFIRM"})):new MessageBox(options),body=mb.body(),cur=curTab,contents={},scripts={},contentBox,tabsBox,tabHeader,tabFooter,w,html='<div class="mb_header">'+(options.header||"")+'</div><div class="mb_tab_header"><div class="mb_tabs"><div class="mb_tabs_list fl_l">',tmp={},curContent="";options=extend({showOneTab:!1,onTab:function(e,t){},tabLoaded:function(e){}},options);var noTab=!options.showOneTab&&tabs.length<=1;return noTab||each(tabs,function(e,t){tmp["mb_tab_"+t[0]]=t;var o=curTab==t[0]?"mb_tab_selected":"";html+='<div class="mb_tab '+o+'" id="mb_tab_'+t[0]+'"><div class="mb_tab1"><div class="mb_tab2">'+t[1]+"</div></div></div>",t[2]&&curTab==t[0]&&mb.setOptions({title:t[2]})}),w=getSize(body.parentNode.parentNode)[0]-22,html+='</div><div class="fl_r mb_search">'+(options.search||"")+'</div><div class="clear"></div></div>'+sh(30,0)+sh(11,1)+sh(7,2)+sh(3,3)+'</div><div class="mb_tab_content" style="'+(options.tabStyle||"")+'"></div><div class="mb_tab_footer">'+sh(3,-4)+sh(7,-3)+sh(11,-2)+sh(30,-1)+sh(80,0," mb_shadow_last")+"</div>",mb.content(html),contentBox=geByClass("mb_tab_content",body)[0],tabHeader=geByClass("mb_tab_header",body)[0],tabFooter=geByClass("mb_tab_footer",body)[0],noTab&&(hide(tabHeader),hide(tabFooter)),extend(mb,{switchTab:function(e){return cur==e&&curContent==contents[e]?!1:(cur!=e&&(cur=e,each(tabs,function(e,t){cur==t[0]?(addClass(t.obj,"mb_tab_selected"),t[2]&&mb.setOptions({title:t[2]})):removeClass(t.obj,"mb_tab_selected")})),contentBox.innerHTML=curContent=contents[e],scripts[e]&&es(scripts[e]),!0)},tabContent:function(e,t){return void 0===e?contentBox.innerHTML:(contents[e]=t,this.switchTab(e),this)},tabLoadContent:function(tab,url,params,ev,st,noloader){return noloader||(contentBox.innerHTML='<div class="box_loader" style="'+(st||"")+'"></div>'),"object"!=typeof params&&(params={}),Ajax.Send(url,params,{onSuccess:function(o,t){if(ev)try{var res=eval("("+t+")");contents[tab]=res.html||"",res.script&&(scripts[tab]=res.script)}catch(e){return err(e.message)}else contents[tab]=t;mb.switchTab(tab),isFunction(options.onLoad)&&options.onLoad(t)},onFail:function(e,t){err("Request error occured.")}}),this},loadTab:function(e){var t=options.onTab(e,contents[e]?!0:!1);return t!==!1&&this.switchTab(e),options.tabLoaded(e),this},curTab:function(){return cur}}),each(geByClass("mb_tab",body),function(e,t){var o=tmp[t.id];tmp[t.id].obj=t,o&&addEvent(t,"click",function(){mb.loadTab(o[0])})}),mb}function createButton(e,t,o,n){if(e=ge(e),e&&(!n||!e.btnInited)){var i=e.parentNode;if(hasClass(i,"button_blue")||hasClass(i,"button_gray"))return void(isFunction(t)&&(e.onclick=t.pbind(e)));void 0==o&&(o="button");var a=!1;addEvent(e,"click mousedown mouseover mouseout",function(n){if(!hasClass(i,"locked")){{getXY(e),[e.offsetWidth,e.offsetHeight]}switch(n.type){case"click":if(!a)return;e.className=o+"_hover",t(e);break;case"mousedown":e.className=o+"_down";break;case"mouseover":a=!0,e.className=o+"_hover";break;case"mouseout":e.className=o,a=!1}}}),n&&(e.className=o+"_hover",a=!0),e.btnInited=!0}}function lockFlatButton(e){e&&"button"==e.tagName.toLowerCase()&&!isButtonLocked(e)&&(addClass(e,"flat_btn_lock"),e.innerHTML='<span class="flat_btn_h">'+e.innerHTML+"</span>")}function unlockFlatButton(e){isButtonLocked(e)&&(e.innerHTML=e.firstChild.innerHTML,removeClass(e,"flat_btn_lock"))}function isButtonLocked(e){return(e=ge(e))?hasClass(e,"flat_btn_lock"):void 0}function lockButton(e){if(hasClass(e,"flat_button"))return void lockFlatButton(e);if(e&&"button"==e.tagName.toLowerCase()&&!buttonLocked(e)){var t=ce("span",{className:"button_lock"});e.parentNode.insertBefore(t,e),e.old_width=e.style.width,e.old_height=e.style.height;var o=getSize(e.parentNode);setStyle(e,{width:o[0]-2,height:o[1]-2}),browser.msie6||browser.msie7?(e.old_html=e.innerHTML,e.innerHTML=""):e.style.textIndent="-9999px"}}function unlockButton(e){if(hasClass(e,"flat_button"))return void unlockFlatButton(e);var t=geByClass("button_lock",e.parentNode,"span")[0];t&&(e.parentNode.removeChild(t),e.style.width=e.old_width,e.style.height=e.old_height,(browser.msie6||browser.msie7)&&(e.innerHTML=e.old_html),e.style.textIndent="")}function buttonLocked(e){return(e=ge(e))?geByClass1("button_lock",e.parentNode,"span")?!0:!1:void 0}function changeLang(e){if(e)var t={title:getLang("select_language"),width:480,bodyStyle:"padding: 16px 14px;"};else var t={title:getLang("global_lang_box_title"),width:320,bodyStyle:"padding: 15px 20px;"};return langBox||(langBox=new MessageBox),langBox.setOptions(t).addControlsText(""),langBox.removeButtons().addButton({label:getLang("box_close"),onClick:function(){langBox.hide(200)}}),langBox.loadContent("lang.php",{act:"lang_dialog",all:e?1:0},!0).show(),!1}function doChangeLang(e,t){return Ajax.Send("lang.php",{act:"change_lang",lang_id:e,hash:t},function(){setCookie("remixlang",e),location.reload(!0)}),!1}function showBox(e,t,o,n,i,a,r){if("object"==typeof n&&(i=n.reload,a=n.params,r=n.files,n=n.href),n&&window.event&&(2==window.event.which||1==window.event.button))return!0;if(a=extend({title:getLang("box_loading")},a),winBoxes[e])i&&winBoxes[e].setOptions(a);else if(winBoxes[e]=new MessageBox(a),i=!0,r)for(var s in r)/\.css/i.test(r[s])?addCss(r[s]):/\.js/i.test(r[s])&&attachScript("script"+s,r[s]);return i&&(winBoxes[e].removeButtons(),winBoxes[e].addButton({label:getLang("global_close"),onClick:winBoxes[e].hide}),winBoxes[e].loadContent(t,o,!0)),hide("qfriends"),gSearch.on&&gSearch.hide(),winBoxes[e].show(),!1}function notaBene(e,t){e=ge(e),e.focus();var o=data(e,"back");o||(o=data(e,"back",getStyle(e,"backgroundColor")));var n={notice:"#FFFFE0",warning:"#FAEAEA"};setStyle(e,"backgroundColor",n[t]||t||n.warning),setTimeout(function(){animate(e,{backgroundColor:o},300)},400)}function im_popup(e){if(window.event&&(2==window.event.which||1==window.event.button))return!0;var t="scrollbars=0,resizable=1,menubar=0,location=0,width=610,height=469,toolbar=0,status=0";window.loc_host||(window.loc_host=location.host);var o=window.loc_host.toString().match(/[a-zA-Z]*\.[a-zA-Z]*$/)[0];document.domain=o;var n="http://"+(/^cs\d*/.test(window.loc_host)?window.loc_host:o)+"/im.php?act=a_box&popup=1",i="window.im.activate_tab(0);";e&&(n+="&sel="+e,i="window.im.add_peers("+e+", "+e+")"),n="javascript: try { "+i+' } catch(e) { document.location = "'+n+'"; void(0); }',window.im_popup_window=window.open(n,"im",t);try{browser.chrome||browser.msie||browser.mozilla||browser.safari||!window.im_popup_window.im||(window.im_already_box=new MessageBox({title:window.im_already_shown_title||"���������� ���������"}),im_already_box.content(window.im_already_shown||"���� ���������� ��������� ��� ��������, ��� ���������� ������ ������� �� ����."),im_already_box.addButton({label:getLang("box_close"),onClick:im_already_box.hide}),setTimeout("im_already_box.hide(400)",2e3),im_already_box.show())}catch(a){}browser.msie||window.im_popup_window.blur(),window.im_popup_window.focus();try{document.domain=window.loc_host}catch(a){}return!1}function linkButton(e,t){e=ge(e),addEvent(e,"mouseover",function(){this.className="linkover"}),addEvent(e,"mouseout",function(){this.className="link"}),addEvent(e,"click",t)}function showVideoBoxCommon(e,t,o,n,i,a,r,s,c,l){return window.PLAYER_JS_ADDED&&void 0!=window.swfobject?showVideoBox(e,t,o,n,i,a,r,s,c,l):(video_js_attached||(attachScript("player_js","/js/player.js"),attachScript("lib/swfobject2.js","/js/lib/swfobject2.js"),video_js_attached=1),setTimeout(function(){showVideoBoxCommon(e,t,o,n,i,a,r,s,c,l)},50),!1)}function reportVideo(e,t){showBox("reportVideo","reports.php",{act:"a_report_video_box",vid:t,oid:e},!1,!0,{width:350},["js/lib/ui_controls.js","css/ui_controls.css"])}function goAway(e,t){if(/https?:\/\/([a-zA-Z0-9\-_\.]+\.)?(vk\.com|vkontakte\.ru)(\/|$)/i.test(e))return t.type&&"_blank"==t.type?window.open(e,"_blank"):document.location=e,!1;var o=parseInt(getCookie("remixsettings_bits"));if(/https?:\/\/([a-zA-Z0-9\-_]+\.)(vk\.com|vkontakte\.ru)(\/|$)/i.test(location.toString())||1&o)return window.open(base_domain+"away.php?to="+encodeURIComponent(e)+(t&&void 0!==t.h?"&h="+t.h:""),"_blank"),!1;var n=extend({act:"a_go",to:e},t||{});return addCss("css/ui_controls.css"),showBox("awayBox","away.php",n,{reload:!0,href:!0})}function operate(){loadPlayer("operate",arguments)}function operateWall(){loadPlayer("operateWall",arguments)}function loadPlayer(e,t){window.player_onload=function(){window[e].apply(window,t),window.player_onload=null},window.PLAYER_JS_ADDED?player_onload():(attachScript("swfobject_js","/js/swfobject.js"),attachScript("player_js","/js/player.js"),addCss("css/player.css"))}function showZeroZoneBox(e,t,o){return!1}function BaseTooltip(e,t){var o={width:"auto",height:30,style:"",contentTemplate:'<div class="tt_content">{text}</div>',params:[],className:"base_tooltip",toUp:!0,slide:!0,align:"left",shift:[40,10,5,1,64],template:'<table class="tooltip_wrap" cellpadding="0" cellspacing="0"><tr><td colspan="3"><div class="tt_top_pointer"></div></td></tr><tr><td class="tt_left_shadow"></td><td>{content}</td><td class="tt_right_shadow"></td></tr><tr><td colspan="3"><div class="tt_bottom_shadow"></div><div class="tt_bottom_pointer"></div></td></tr></table>',onMouseOut:function(){data(e,"over",!1),setTimeout(function(){!data(e,"over")&&data(e,"tooltip")&&data(e,"tooltip").hide()},a.timeouts[2])},onMouseOver:function(){data(e,"over",!0)}};this.options=extend(o,t);var n=parseInt(this.options.width),i=this;this.options.width=n>0?n:o.width,this.content=this.options.contentTemplate;var a=this.options;each(a.params,function(e,t){i.content=i.content.replace("{"+e+"}",t||"")});var r=ce("div",{className:a.className,innerHTML:a.template.replace("{content}",this.content)},{width:a.width,visibility:"hidden",display:"block"});this.container=r,this.height=!1,this.bottomPointer=geByClass("tt_bottom_pointer",r)[0],this.topPointer=geByClass("tt_top_pointer",r)[0],setStyle(this.bottomPointer,"marginLeft",a.shift[4]),setStyle(this.topPointer,"marginLeft",a.shift[4]),document.body.appendChild(r),isFunction(a.onInit)&&a.onInit.call(this)===!1||(hide(geByClass("tt_thumb",r)[0]),this.height=getSize(r)[1],setStyle(r,{display:"none",visibility:"visible"})),this.show=function(){var t=this,o=this.options;if(!this.options.onShow||this.options.onShow.apply(this)!==!1){this.height||setTimeout(function(){t.show()},o.timeouts[3]);var n,i,a="right"==o.align,s=o.shift,c=o.posTarget||e,l=getSize(c),d=getXY(c),u=a?d[0]+l[0]+s[0]:d[0]-s[0],h=getScroll(),p=h[1],f=h[3];!a&&l[0]/2<s[4]-s[0]+5&&(u=d[0]+parseInt(l[0]/2)-s[4]-5);var g=d[1]-p<this.height+s[1],m=f+p-d[1]-l[1]<this.height+s[1],v=o.toUp?!g||m:m&&!g;v?(addClass(r,"base_tooltip_bottom"),removeClass(r,"base_tooltip_top"),this.height&&(this.height=getSize(r)[1]||this.height),n=Math.max(d[1]-this.height+s[2],0),i=o.slide?n-15:n):(addClass(r,"base_tooltip_top"),removeClass(r,"base_tooltip_bottom"),n=d[1]+l[1]+s[3],i=o.slide?n+15:n),browser.msie6&&(n-=p,i-=p),setStyle(r,{display:"block",top:i,left:u,opacity:0}),a&&setStyle(r,{left:u-getSize(r)[0]}),animate(r,{opacity:1,top:n},o.timeouts[4],function(){v&&browser.msie&&setStyle(t.bottomPointer,"opacity",1)})}},isFunction(a.onMouseOver)&&addEvent(r,"mouseover",a.onMouseOver),isFunction(a.onMouseOut)&&addEvent(r,"mouseout",a.onMouseOut),this.hide=function(){this.options.onHide&&this.options.onHide()===!1||fadeOut(r,a.timeouts[5])}}function SimpleTooltip(e,t){return new BaseTooltip(e,extend({className:"simple_tooltip",slide:!1,align:"right",shift:[0,0,0,2,0],onMouseOver:null},t))}function LikeTooltip(e,t){return new BaseTooltip(e,extend({className:"like_tooltip",shift:[0,10,5,1,15],contentTemplate:'<div class="tt_content"><a class="lite_cb" onclick="checkbox(this);return false;">{text}</a></div>',toUp:!1},t))}function showTT(anchor,func,url,params){if(!data(anchor,"over")){"string"==typeof params&&(params={params:{text:params}});var query=params;query.posTarget&&delete query.posTarget,params=extend({timeouts:func.timeouts?func.timeouts:[200,400,300,300,200,100]},params),data(anchor,"over",!0);var tooltip=data(anchor,"tooltip"),to=params.timeouts;if(tooltip||!data(anchor,"inited"))if(data(anchor,"inited",!0),tooltip)setTimeout(function(){data(anchor,"over")&&(isVisible(tooltip.container)||tooltip.show())},to[1]);else{var hideTO=function(){!data(anchor,"over")&&data(anchor,"tooltip")&&data(anchor,"tooltip").hide()};addEvent(anchor,"mouseout",function(){data(anchor,"over",!1),setTimeout(hideTO,to[2])});var t=setTimeout(function(){var onDone=function(o,t){if(t){var res=o?eval("("+t+")"):t;res.js&&(res.onInit=function(){try{return eval(res.js),ttToShow}catch(e){debugLog(e)}}),tooltip=new func(anchor,extend(params,res)),data(anchor,"tooltip",tooltip),data(anchor,"over")&&tooltip.show()}};url?Ajax.Post({url:url,query:query,onDone:onDone}):onDone(null,{})},to[0]);data(anchor,"preview_timeout",t)}}}function isChecked(e){return e=ge(e),hasClass(e,"on")?1:""}function checkbox(e,t){void 0===t&&(t=!isChecked(e)),t?addClass(e,"on"):removeClass(e,"on")}function onCtrlEnter(e,t){e=e||window.event,(10==e.keyCode||13==e.keyCode&&(e.ctrlKey||e.metaKey&&browser.mac))&&(t(),cancelEvent(e))}var base_domain=base_domain||"/",css_versions={},_ua=navigator.userAgent.toLowerCase(),browser={version:(_ua.match(/.+(?:me|ox|on|rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],opera:/opera/i.test(_ua),msie:/msie/i.test(_ua)&&!/opera/i.test(_ua),msie6:/msie 6/i.test(_ua)&&!/opera/i.test(_ua),msie7:/msie 7/i.test(_ua)&&!/opera/i.test(_ua),msie8:/msie 8/i.test(_ua)&&!/opera/i.test(_ua),msie9:/msie 9/i.test(_ua)&&!/opera/i.test(_ua),mozilla:/firefox/i.test(_ua),chrome:/chrome/i.test(_ua),safari:!/chrome/i.test(_ua)&&/webkit|safari|khtml/i.test(_ua),iphone:/iphone/i.test(_ua),ipod:/ipod/i.test(_ua),iphone4:/iphone.*OS 4/i.test(_ua),ipod4:/ipod.*OS 4/i.test(_ua),ipad:/ipad/i.test(_ua),safari_mobile:/iphone|ipod|ipad/i.test(_ua),android:/android/i.test(_ua),opera_mobile:/opera mini|opera mobi/i.test(_ua),mobile:/iphone|ipod|ipad|opera mini|opera mobi/i.test(_ua),mac:/mac/i.test(_ua)};window.vk||(window.vk={loginscheme:"http",ip_h:""});var _logTimer=(new Date).getTime();window.shide=toggle;var hfTimeout;Function.prototype.bind=function(e){var t=this;return function(){return t.apply(e,arguments)}},Function.prototype.pbind=function(){var e=this,t=arguments;return function(){var o=[];each(t,function(e,t){o[e]=t});var n=window,i=[];return each(arguments,function(e,t){i[e]=t}),e.apply(n,o.concat(i))}};var expand="VK"+vkNow(),vk_uuid=0,vk_cache={},Fx=fx={Transitions:{linear:function(e,t,o,n){return o*e/n+t},sineInOut:function(e,t,o,n){return-o/2*(Math.cos(Math.PI*e/n)-1)+t},halfSine:function(e,t,o,n){return o*Math.sin(Math.PI*(e/n)/2)+t},easeOutBack:function(e,t,o,n){var i=1.70158;return o*((e=e/n-1)*e*((i+1)*e+i)+1)+t},easeInCirc:function(e,t,o,n){return-o*(Math.sqrt(1-(e/=n)*e)-1)+t},easeOutCirc:function(e,t,o,n){return o*Math.sqrt(1-(e=e/n-1)*e)+t},easeInQuint:function(e,t,o,n){return o*(e/=n)*e*e*e*e+t},easeOutQuint:function(e,t,o,n){return o*((e=e/n-1)*e*e*e*e+1)+t},easeOutCubic:function(e,t,o,n){return o*((e=e/n-1)*e*e+1)+t}},Attrs:[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],Timers:[],TimerId:null};Fx.Base=function(e,t,o){this.el=ge(e),this.name=o,this.options=extend({onComplete:function(){},transition:Fx.Transitions.sineInOut,duration:500},t||{})},each({slideDown:genFx("show",1),slideUp:genFx("hide",1),slideToggle:genFx("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){window[e]=function(e,o,n){return animate(e,t,o,n)}}),Fx.Base.prototype={start:function(e,t){function o(e){return n.step(e)}this.from=e,this.to=t,this.time=vkNow(),this.isTweening=!0;var n=this;return o.el=this.el,o()&&Fx.Timers.push(o)&&!Fx.TimerId&&(Fx.TimerId=setInterval(function(){for(var e=Fx.Timers,t=0;t<e.length;t++)e[t]()||e.splice(t--,1);e.length||(clearInterval(Fx.TimerId),Fx.TimerId=null)},13)),this},stop:function(e){for(var t=Fx.Timers,o=t.length-1;o>=0;o--)t[o].el==this.el&&(e&&t[o](!0),t.splice(o,1));this.isTweening=!1},step:function(e){var t=vkNow();if(!e&&t<this.time+this.options.duration){this.cTime=t-this.time,this.now={};for(p in this.to)if(isArray(this.to[p])){var o,n=[];for(o=0;3>o;o++)n.push(Math.min(parseInt(this.compute(this.from[p][o],this.to[p][o])),255));this.now[p]=n}else this.now[p]=this.compute(this.from[p],this.to[p]);return this.update(),!0}return setTimeout(this.options.onComplete.bind(this,this.el),10),this.now=extend(this.to,this.options.orig),this.update(),this.options.hide&&hide(this.el),this.isTweening=!1,!1},compute:function(e,t){var o=t-e;return this.options.transition(this.cTime,e,o,this.options.duration)},update:function(){for(var e in this.now)isArray(this.now[e])?setStyle(this.el,e,"rgb("+this.now[e].join(",")+")"):void 0!=this.el[e]?this.el[e]=this.now[e]:setStyle(this.el,e,this.now[e])},cur:function(e,t){return null==this.el[e]||this.el.style&&null!=this.el.style[e]?parseFloat(getStyle(this.el,e,t))||0:this.el[e]}};var KEY=window.KEY={LEFT:37,UP:38,RIGHT:39,DOWN:40,DEL:8,TAB:9,RETURN:13,ESC:27,PAGEUP:33,PAGEDOWN:34,SPACE:32,HOME:36,END:35,ENTER:13,DELETE:46,BACKSPACE:8};addEvent(window,"unload",function(){for(var e in vk_cache)vk_cache[e].handle&&vk_cache[e].handle.elem!=window&&removeEvent(vk_cache[e].handle.elem)}),addEvent(window,"mouseup dragstart touchend touchcancel",tnInactive),addEvent(document,"mouseup dragstart touchend touchcancel",tnInactive),function(){var e=!1,t=!1,o=[];window.onDomReady=function(t){i(),e?t.call(document):o.push(function(){t.call(document)})},window.onBodyResize=function(){var e=Math.max(intval(window.innerWidth),intval(document.documentElement.offsetWidth));if(window.lastWindowWidth!=e){if(window.lastWindowWidth=e,browser.msie6)return;window.photoLayerVisible||(document.body.style.overflowY="auto");var t=ge("pageLayout").offsetWidth,o=sbWidth();document.body.offsetWidth<t?(document.body.style.overflowX="auto",e=t+o+2):document.body.style.overflowX="hidden",e&&(ge("pageContainer").style.width=e-o-2+"px")}};var n=function(){if(!e&&(e=!0,o)){var t=o;for(t.reverse();fn=t.pop();)fn.apply(document);o=null}},i=function(){t||(t=!0,document.addEventListener&&!browser.opera&&document.addEventListener("DOMContentLoaded",n,!1),browser.msie&&window==top&&function(){if(!e){try{document.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}n()}}(),browser.opera&&document.addEventListener("DOMContentLoaded",function(){e||n()},!1),browser.safari&&!function(){return e?void 0:"loaded"!=document.readyState&&"complete"!=document.readyState?void setTimeout(arguments.callee,0):void n()}(),addEvent(window,"load",n))}}(),function(){var ajaxObjs={};window.Ajax.Get=function(e){var t=e.key?ajaxObjs[e.key]:null;t||(t=new Ajax(e.onDone,e.onFail,e.eval),e.key&&(ajaxObjs[e.key]=t)),t.get(e.url,e.query,e.sync)},window.Ajax.Post=function(e){var t=e.key?ajaxObjs[e.key]:null;t||(t=new Ajax(e.onDone,e.onFail,e.eval),e.key&&(ajaxObjs[e.key]=t)),t.post(e.url,e.query,e.sync)},window.Ajax.postWithCaptcha=function(url,data,options){var onSuccess,onFail,onCaptchaShow,onCaptchaHide,difficulty,p;options||(options={}),isFunction(options)?onSuccess=options:(onSuccess=options.onSuccess,onFail=options.onFail,onCaptchaShow=options.onCaptchaShow,onCaptchaHide=options.onCaptchaHide);var done=function(o,t){var r;try{switch(r=eval("("+t+")"),-5==r.ok&&ge("please_confirm_mail")&&(r.ok=-4),r.ok){case-6:var box=new MessageBox({title:r.title||getLang("global_charged_zone_title"),returnHidden:!0});box.addButton({label:getLang("global_cancel"),style:"button_no",onClick:function(){box.setOptions({returnHidden:!1}),box.hide()}}).addButton({label:getLang("global_charged_zone_continue"),onClick:function(){box.hide(),p.query.charged_confirm=r.hash,Ajax.Post(p)}}).content(r.message).show();break;case-5:if(isFunction(onCaptchaShow)&&onCaptchaShow(),r.title||r.message){var box=new MessageBox({title:r.title||"������������� ��������"});box.addButton({label:getLang("global_close"),onClick:box.hide}),box.content(r.message||"��������� ����������� �� ���������� ��������, ���������� �����.").show()}else window.validated=!1,activate_mobile(!1,function(){window.validated&&Ajax.Post(p),onCaptchaHide&&onCaptchaHide(!window.need_mobile_act)},r.hash);break;case-4:isFunction(onCaptchaShow)&&onCaptchaShow(),ge("please_confirm_mail")?show_change_mail_box(onCaptchaHide):onCaptchaHide&&onCaptchaHide();break;case-3:var to,iframe=ce("iframe",{src:vk.loginscheme+"://login.vk.com/?ip_h="+vk.ip_h+"&_origin="+location.protocol+"//"+location.host},{visibility:"hidden",position:"absolute"});document.body.appendChild(iframe);var onload=function(){try{var e=iframe.contentWindow.location.href;if(e.match(/&hash=/)){if(!e.match(/&hash=[a-z0-9]+/))return location.href=base_domain+"login.php?op=logout",!1;Ajax.Post(p),clearInterval(t)}}catch(o){}};browser.msie?to=setInterval(function(){"complete"==iframe.document.readyState&&onload()},200):iframe.onload=onload;break;case-2:var difficulty="";void 0===r.difficult&&(r.difficult=options.difficultCaptcha?1:0),void 0!==r.difficult&&(difficulty=intval(r.difficult)?"":"s=1&");var onClick=function(e,t){return"object"==typeof p.query?extend(p.query,{captcha_sid:e,captcha_key:t}):p.query+="&captcha_sid="+e+"&captcha_key="+t,Ajax.Post(p),!1},captcha_img=base_domain+"captcha.php?"+difficulty+"sid="+r.captcha_sid;showCaptcha(r.captcha_sid,captcha_img,onClick,onCaptchaShow,onCaptchaHide);break;default:throw"Exit"}}catch(e){options.json&&r?t=r:r&&"string"==typeof r.text&&(t=r.text),window.Ajax._captchaBox&&(window.Ajax._captchaBox.setOptions({onHide:function(){}}).hide(),isFunction(onCaptchaHide)&&onCaptchaHide(!0)),isFunction(onSuccess)&&onSuccess(o,t)}},fail=function(e,t){isFunction(onFail)&&onFail(e,t),window.Ajax._captchaBox&&(window.Ajax._captchaBox.setOptions({onHide:function(){}}).hide(),isFunction(onCaptchaHide)&&onCaptchaHide(!0))};p={url:url,query:data,onFail:fail,onDone:done},Ajax.Post(p)},window.Ajax.History=function(url,query,update,failed){ajaxHistory.useCache=!1,ajaxHistory.prepare({url:url,done:function(o,t){try{var r=eval("("+t+")");r.data&&(Ajax.current=r.data),update(r)}catch(e){debugLog(e)}},fail:failed,def:query}),Ajax.current=query},window.Ajax.Go=function(e){var t=extend(clone(Ajax.current),e);return ajaxHistory.go(t),!1},window.Ajax.Send=Ajax.postWithCaptcha}();var ajaxHistory=$ah=new function(){var e=this,t="",o={},n=null,i=browser.msie6||browser.msie7,a=function(){return n.contentDocument?n.contentDocument:n.contentWindow?n.contentWindow.document:n.document},r=function(e){var t=a();t.open(),t.write('<div id="hash">'+e.replace("&","&amp;").replace('"',"&quot;").replace(">","&gt;").replace("<","&lt;")+"</div>"),t.close()},s=!1,c=null;e.enabled=!1,e.useCache=!0,e.onLoad={},e.cache={},e.preloads={};var l=function(e){return e=e.replace("#",""),location.hash!="#"+e&&(location.hash="#"+e,i&&(r(e),g())),!0},d=function(){if(!i)return location.hash.replace("#","");try{return a().getElementById("hash").innerHTML.replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&quot;/gi,'"').replace(/&amp;/gi,"&")}catch(e){return t}},u=function(t){if(!t)return{};if(t=t.split("/"),1==t.length)return e.onLoad["default"]?(e.onLoad["default"].show&&(t[0]=e.onLoad["default"].show.from(t[0])),{"default":f(t[0])}):{};for(var o={},n=0;n<t.length;n+=2){var i=t[n],a=t[n+1];e.onLoad[i].show?a=f(e.onLoad[i].show.from(a)):(a=f(a),!a&&e.onLoad[i]&&(a=f(e.onLoad[i].def))),o[i]=a}return o},h=function(t){var o=[],n=!0;for(var i in t){n=n&&"default"==i;var a=f(t[i]);if(e.onLoad[i].show){var r=e.onLoad[i].show.to(p(t[i]));r&&(a=r)}o.push(i+"/"+a)}return n&&o[0]?o[0].split("/")[1]:o.sort().join("/")},p=function(e){if(!e)return{};if("string"!=typeof e)return e;if(!/&|=/.test(e))return e;for(var t=e.split("&"),o={},n=0;n<t.length;n++){var i=t[n].split("=");o[i[0]]=i[1]}return o},f=function(e){return"number"==typeof e?e+"":("string"!=typeof e&&(e=ajx2q(e)),e.split("&").sort().join("&"))},g=function(){var n=d();if(n!=t||s){var a=u(n),r=h(a);if(r!=t||s){t=r;var l=c||e.onLoad;for(var g in l){c&&(g=l[g]);var m=e.onLoad[g],v=a[g]||f(m.def);if(t!=m.ignoreHash&&(v!=o[g]||g==s)){var b=s?"":"&auto=1";if(s=!1,m.before&&!m.before(p(v))){o[g]=v;continue}e.cache[g]||(e.cache[g]={}),e.preloads[g]||(e.preloads[g]={});var _=decodeURIComponent(v);e.useCache&&(e.cache[g][v]||e.cache[g][_])?m.done&&(e.cache[g][v]?m.done({},e.cache[g][v]):m.done({},e.cache[g][_])):e.preloads[g][v]?m.done&&(e.preloads[g][v]=m.done):e.preloads[g][_]?m.done&&(e.preloads[g][_]=m.done):e.getData(m,g,v+b,r),o[g]=v}}i&&location.hash!="#"+t&&(location.hash="#"+t)}}},m=!1;e.init=function(){if(this.enabled&&!m){m=!0;for(var t in e.onLoad){var i=f(e.onLoad[t].def);o[t]=i}browser.msie&&!browser.msie8?(n=ce("iframe",{id:"ahFrame"},{position:"absolute",visibility:"hidden"}),addEvent(n,"readystatechange",function(){"complete"==this.contentWindow.document.readyState&&g()}),document.body.appendChild(n),r(location.hash.replace("#","")),g()):setInterval(g,150)}},e.go=function(e,o){void 0===o&&(o=e,e="default");var n=u(t);n[e]=f(o);var a=h(n);l(a),s=e,i||g()},e.getData=function(t,o,n,i){var a=new Ajax(function(t,o,n,i){return function(a,r){var s=!0;if(t.done&&(s=t.done(a,r)),i.useCache){var c=n.indexOf("&auto=1");-1!=c&&(n=n.substr(0,c)),s!==!1&&(e.cache[o][n]=r)}}}(t,o,n,e),function(e,t,o,n){return function(t,o){e.fail&&e.fail(t,o)}}(t,o,n,e),!0);a.post(t.url,n)},e.prepare=function(t,o){e.enabled=!0,void 0===o&&(o=t,t="default"),e.onLoad[t]=o},e.validateHash=function(e){return h(u(e))},e.clearCache=function(t){e.cache[t]={}},e.clearCurr=function(o){if(void 0===o&&(o="default"),e.cache&&e.cache[o]){var n=u(t),i=n[o],a=decodeURIComponent(n[o]);e.cache[o][i]=e.cache[o][a]=void 0}},e.setHash=function(e,n){void 0===n&&(n=e,e="default"),n=n.replace("#",""),location.hash!="#"+n&&(location.hash="#"+n,t=n,o[e]=t)},e.addToCache=function(t,o){if(e.useCache){var n="default",i=u(t);if(e.cache[n]){if(e.cache[n][i[n]])return}else e.cache[n]={};e.cache[n][i[n]]=o}},e.preLoad=function(t,o){if(e.useCache){var n="default",i=u(t);if(e.cache[n]||(e.cache[n]={}),!e.cache[n][i[n]]){e.preloads[n]||(e.preloads[n]={}),e.preloads[n][i[n]]="<loading>";var a=new Ajax(function(t,n){return function(i,a){var r=!0;"<loading>"!=e.preloads[t][n]?r=e.preloads[t][n](i,a):o&&(r=o(i,a)),r!==!1&&(e.cache[t][n]=a)}}(n,i[n]),function(){},!0);a.post(e.onLoad[n].url,i[n]+"&preload=1")}}}};onDomReady(function(){if(ajaxHistory.init(),window.devicePixelRatio>=2&&!browser.iphone){var e=intval(getCookie("remixrt"));1&e||setCookie("remixrt",1|e,365),addClass(document.body,"is_2x")}});var _cookies,gSearch=new function(){this.on=0;var e=this;this.hub=new callHub(function(){e.onShow&&onDomReady(e.onShow)},2),this.hintsHub=new callHub(function(){e.showStartHints()},2),this.load=function(){ge("quick_search")&&(this.global||this.loading||(this.loading=!0,jsDispatcher.include("qsearch",function(){e.hub.done()}),Ajax.Send("hints.php",{act:"a_start_hints"},{onSuccess:function(t,o){e.startHintsText=trim(o),e.hintsHub.done()}})))},this.show=function(t,o){if(ge("quick_search")){if(this.on)return this.go(t);if(this.on=1,show("quick_search"),placeholderSetup("search_input"),ge("search_input").setAttribute("autocomplete","off"),addClass("qsearch_link","active"),!this.global)return this.prev_content=ge("content"),this.qsearch_cont||(this.qsearch_cont=ce("div",{id:"content",innerHTML:'<div style="padding: 200px; text-align: center;"><img src="/images/progress7.gif"/></div>'},{padding:0})),hide("header"),this.prev_content.parentNode.replaceChild(this.qsearch_cont,this.prev_content),this.loading||this.load(),e.hub.done(),e.hintsHub.done(),t?cancelEvent(t):void 0}},this.go=function(t){if(e.global)return globalSearch();var o="/gsearch.php?section="+(e.last_section||"people")+"&q="+trim(ge("search_input").getValue?ge("search_input").getValue():ge("search_input").value)+"&name=1";return cancelEvent(t||window.event),location.href=o,!1},this.hide=function(t,o){if(ge("quick_search")&&(!e.active||o)&&e.on){if(e.on=0,toggleFlash(),e.beforeHide&&e.beforeHide())return!0;show("header"),hide("quick_search"),ge("search_input").setValue?ge("search_input").setValue(""):ge("search_input").value="",removeClass("qsearch_link","active"),e.qsearch_cont&&e.qsearch_cont.parentNode.replaceChild(e.prev_content,e.qsearch_cont)}},this.init=function(e){this.opt=e||{}}},qCur=0,qOn=0,sOn=0,qfOn=0,qd=0,l=0,qa=0,qfCur=-1,newSearch=0;reqs=[],res=[],friends_l=[],friends_arr=[],floaded=!1;var rateBox,_message_box_guid=0,_message_boxes=[],_message_box_shown=0,_doc_block_timeout,_doc_blocked=!1,langBox;!function(){var e=0;window.checkTextLength=function(t,o,n,i,a){if(e!=o.length){e=o.length;var r=replaceChars(o,i).length;r>t-100?show(n):hide(n),n.innerHTML=r>t?getLang("text_exceeds_symbol_limit",r-t):r>t-100?getLang("text_N_symbols_remain",t-r):""}},window.replaceChars=function(e,t){for(var o="",n=0;n<e.length;n++){var i=e.charCodeAt(n);switch(i){case 38:o+="&amp;";break;case 60:o+="&lt;";break;case 62:o+="&gt;";break;case 34:o+="&quot;";break;case 13:o+="";break;case 10:o+=t?"	":"<br>";break;case 33:o+="&#33;";break;case 39:o+="&#39;";break;default:o+=i>128&&192>i||i>1280?"&#"+i+";":e.charAt(n)}}return o}}();var winBoxes={};window.sbWidth=function(){if(!window._sbWidth){var e=ce("div",{innerHTML:'<div style="height:200px;">O<br/>L<br/>O<br/>L<br/>O</div>'},{overflowY:"scroll",position:"absolute",height:100,width:100}),t=document.getElementsByTagName("body")[0];t.appendChild(e),window._sbWidth=e.offsetWidth-e.getElementsByTagName("div")[0].offsetWidth-1,t.removeChild(e),delete e}return window._sbWidth};var video_js_attached=0,video_lang_vars=null,player_needed="",video_player_flash_better="",video_player_html5_msg="";jsDispatcher={_deps:{mentions:["lib/ui_controls"],inline_edit:["lib/ui_controls"]},_loaded:[],_loading:[],_queue:[],_checkQueue:function(){var e,t,o,n,i;for(e=0;e<this._queue.length;e++){for(o=this._queue[e][0],cb=this._queue[e][1],n=!0,t=0;t<o.length;t++)if(i=this._checkDeps(o[t]),null!==i||inArray(o[t],this._loaded)||(i=inArray(o[t],this._loading)?!1:o[t]),i&&this._attachScript(i),null!==i){n=!1;break}n&&(debugLog("calling cb()"),setTimeout(cb,0),this._queue.splice(e,1))}},_checkDeps:function(e){if(debugLog("_checkDeps: "+e),!e||!this._deps[e])return null;var t,o,n;for(t=0;t<this._deps[e].length;t++){if(o=this._deps[e][t],n=this._checkDeps(o))return n;if(!inArray(o,this._loaded))return inArray(o,this._loading)?!1:o;

}return null},_attachScript:function(e){debugLog("_attachScript: "+e),this._loading.push(e),attachScript(e.replace(/[\/\.]+/g,"_"),"js/"+e+".js")},include:function(e,t){debugLog("include: "+e),"string"==typeof e&&(e=e.split(",")),this._queue.push([e,t]),this._checkQueue()},triggerOnload:function(e,t){t&&t();var o=indexOf(this._loading,e);-1!=o&&this._loading.splice(o,1),inArray(e,this._loaded)||this._loaded.push(e),this._checkQueue()}},SimpleTooltip.timeouts=[50,50,50,300,200,100],TopSearch={init:function(){if(this.inited)return!1;var e=ge("ts_input"),t=(ge("ts_input_wrap"),ge("ts_wrap"),ge("ts_cont_wrap"));return e?(addEvent(e,"focus",function(){TopSearch.deselect(),trim(this.getValue())&&addClass(t.firstChild,"active"),TopSearch.toggleInput(!0)}),addEvent(e,"keydown",function(o){switch(o.keyCode){case KEY.DOWN:case KEY.UP:TopSearch.moveSelection(o.keyCode),cancelEvent(o);break;case KEY.ENTER:var n=geByClass1("active",t);if(n)TopSearch.select(n,o);else{var i=trim(this.getValue());i&&(e.blur(),nav.go("/search?c[section]=auto&c[q]="+encodeURIComponent(i)))}break;case KEY.ESC:TopSearch.clear(),TopSearch.toggleInput(!1)}}),addEvent(e,"keyup",function(e){switch(e.keyCode){case KEY.DOWN:case KEY.UP:case KEY.ENTER:case KEY.ESC:cancelEvent(e);break;default:TopSearch.prepareRows(trim(this.getValue()))}}),addEvent(e,"paste",function(){setTimeout(function(){TopSearch.prepareRows(trim(val(e)))},10)}),addEvent(document,"mousedown touchstart",function(t){!isVisible("ts_wrap")&&hasClass(ge("ts_wrap"),"vk")&&TopSearch.toggleSettings(),e.blur(),TopSearch.toggleInput(!1)}),void(this.inited=!0)):!1},clear:function(){var e=ge("ts_input");e.setValue(""),e.blur(),this.prepareRows()},select:function(e,t,o){if(checkEvent(t))return!0;{var n=ge("ts_cont_wrap"),i=ge("ts_input");ge("ts_input_wrap")}return trim(i.getValue())||(i.blur(),this.toggleInput(!1)),o?(this.writeBox(o),this.clear(),this.toggleInput(!1),!1):(hide(n),this.tsNeedsClear=!0,void(e.href&&(location.href=e.href)))},deselect:function(){var e=ge("ts_cont_wrap");each(geByClass("active",e),function(e,t){removeClass(t,"active")})},itemOver:function(e,t,o){1==t&&TopSearch.deselect();var n=parseInt(e.id.substr(10));toggleClass(e,"write",1==t&&n>0&&2e9>n),toggleClass(e,"go",2==t||1==t&&0>n),t&&addClass(e,"active")},moveSelection:function(e){var t,o=ge("ts_cont_wrap"),n=geByClass1("active",o);switch(e){case KEY.DOWN:t=n?n.nextSibling||n:o.firstChild;break;case KEY.UP:t=n?n.previousSibling||n:!1}return this.deselect(),t&&addClass(t,"active"),!1},highlightInput:function(e){if(!hasClass(ge("ts_wrap"),"vk"))return!1;var t=ge("ts_cont_wrap"),o=ge("ts_input"),n=ge("ts_input_wrap");isVisible(t)||trim(o.getValue())||TopSearch.animationStarted||(e?animate(n,{opacity:.65},{duration:300,transition:Fx.Transitions.easeOutCubic}):animate(n,{opacity:.5},{duration:300,transition:Fx.Transitions.easeOutCubic}))},toggleInput:function(e){if(!hasClass(ge("ts_wrap"),"vk"))return void toggle("ts_cont_wrap",e);var t=ge("ts_cont_wrap"),o=ge("ts_input"),n=ge("ts_input_wrap");if(TopSearch.animationStarted=1,e){if(animate(n,{opacity:1,width:"166px"},{duration:150,transition:Fx.Transitions.easeOutCubic,onComplete:function(){show("ts_cont_wrap"),delete TopSearch.animationStarted}}),window.is_rtl){var i=browser.msie8||browser.msie7?{backgroundPositionX:"150px"}:{backgroundPosition:"150px 5px"};animate(o,i,{duration:150,transition:Fx.Transitions.easeOutCubic})}}else if(hide(t),!trim(o.getValue())&&(animate(n,{opacity:.5,width:"110px"},{duration:150,transition:Fx.Transitions.easeOutCubic,onComplete:function(){delete TopSearch.animationStarted}}),window.is_rtl)){var i=browser.msie8||browser.msie7?{backgroundPositionX:"93px"}:{backgroundPosition:"93px 5px"};animate(o,i,{duration:150,transition:Fx.Transitions.easeOutCubic})}},toggleSettings:function(){var e=ge("ts_settings"),t=ge("ts_wrap"),o=ge("ts_input"),n=isVisible(t),i=browser.msie&&intval(browser.version)<9;n?(addClass(e,"active"),i?(setStyle(e,{opacity:1}),hide(t)):(animate(e,{opacity:1},200),fadeOut(t,200)),o.blur(),this.toggleInput(!1)):(removeClass(e,"active"),i?(setStyle(e,{opacity:.7}),show(t)):(animate(e,{opacity:.7},200),fadeIn(t,200)))},settingsOver:function(){var e=ge("ts_settings");hasClass(e,"active")||animate(e,{opacity:1},200)},settingsOut:function(){var e=ge("ts_settings");hasClass(e,"active")||animate(e,{opacity:.7},200)},getList:function(e){switch(e){case"friends":return window.curFastChat&&curFastChat.friends||this.friendsList||this.topFriends||{};case"publics":case"groups":case"events":case"apps":return this[e+"List"]||{}}return{}},onlines:function(){return this.onlinesList||{}},initFriendsList:function(){if(window.cur=window.cur||{},this.friendsInited)return!1;if(cur.initingFL)return!1;var isEmpty=function(e){for(var t in e)return!1;return!0},getTopFriends=function(){cur.initingFL=!0,Ajax.Send("/al_search.php",{act:"get_top_friends",old:1},function(ajaxObj,response){try{response=eval("("+response+")")}catch(e){response=null}delete response.debug,delete cur.initingFL,TopSearch.topFriends=response,TopSearch.tsListCache(!1,"friends"),cur.tsStr||TopSearch.prepareRows(),getAllPages()})},getAllPages=function(){return TopSearch.friendsInited?!1:(cur.initingFL=!0,void Ajax.Send("/al_search.php",{act:"get_pages",old:1},function(ajaxObj,response){try{response=eval("("+response+")")}catch(e){response=null}delete response.debug,delete cur.initingFL,TopSearch.friendsInited||(each(response,function(e,t){TopSearch[e+"List"]=t,"onlines"!=e&&TopSearch.tsListCache(!1,e)}),cur.tsStr||TopSearch.prepareRows(),TopSearch.friendsInited=!0)}))},fr=this.getList("friends");isEmpty(fr)?getTopFriends():(TopSearch.tsListCache(!1,"friends"),cur.tsStr||TopSearch.prepareRows(),getAllPages())},parseLatKeys:function(e){var t,o=e;for(lat="qwertyuiop[]asdfghjkl;'zxcvbnm,./`",rus="��������������������������������.�",t=0;t<lat.length;t++)o=o.split(lat.charAt(t)).join(rus.charAt(t));return o==e?!1:o},parseCyr:function(e){var t,o=e,n=["yo","zh","kh","ts","ch","sch","shch","sh","eh","yu","ya","YO","ZH","KH","TS","CH","SCH","SHCH","SH","EH","YU","YA","'"],i=["�","�","�","�","�","�","�","�","�","�","�","�","�","�","�","�","�","�","�","�","�","�","�"],a="abvgdezijklmnoprstufhcyABVGDEZIJKLMNOPRSTUFHCY��",r="������������������������������������������������";for(t=0;t<i.length;t++)o=o.split(i[t]).join(n[t]);for(t=0;t<r.length;t++)o=o.split(r.charAt(t)).join(a.charAt(t));return o==e?!1:o},tsListCache:function(e,t){var o=TopSearch.getList(t),n=t+"Cache";if(e){var i,a,r,s,c,l,d,u,h,p=[e];if((a=parseLatin(e))&&p.push(a),(a=TopSearch.parseLatKeys(e))&&p.push(a),(a=TopSearch.parseCyr(e))&&p.push(a),void 0!==TopSearch[n][e])return p;h=TopSearch[n][e]={};for(r in p)if(i=p[r],c=TopSearch[n][" "+i.charAt(0).toLowerCase()]){d=new RegExp("(^|\\s|\\()"+escapeRE(i),"gi");for(s in c)u=o[s+"_"],isArray(u)&&null!==u[0].match(d)&&(h[s]=1)}s=0;for(r in h)s++;return h._num=s,p}var l,f,g;TopSearch[n]={};for(r in o)for(l=o[r][0],r=intval(r),f=0;;){if(g=" "+l.charAt(f).toLowerCase(),TopSearch[n][g]=TopSearch[n][g]||{},TopSearch[n][g][r]=1,f=l.indexOf(" ",f+1),-1==f)break;++f}},listSearch:function(e,t,o){if(!e&&"friends"!=t)return[];var n=[],i=!1,a={},r=t+"Cache";return e?(i=[],each(TopSearch.tsListCache(e,t),function(){i.push(escapeRE(this))}),i=new RegExp("([ -]|^|s|&nbsp;|\b)("+i.join("|")+")","gi"),a=TopSearch[r]&&TopSearch[r][e]||{}):each(TopSearch.getList(t),function(e){var t=intval(e);a[t]=1}),each(TopSearch.getList(t),function(e){var t=intval(e),r=a[t],s=t>0?TopSearch.onlines()[t]:!1,c=this[0],l=t>0?"/id"+t:this[2];if(r)return o--?void n.push(TopSearch.row(t,l,this[1],c,s,i)):!1}),n},row:function(e,t,o,n,i,a,r){var s,c=0,l="";return a&&(n=n.replace(a,'$1<em class="ts_clist_hl">$2</em>')),e>0&&2e9>e&&(s='onmousemove="TopSearch.itemOver(this.parentNode, 2, event);"  onmouseout="TopSearch.itemOver(this.parentNode, 1, event);" onclick="event.cancelBubble = true; return TopSearch.select(this.parentNode, event);"',c=e),"hint"==r&&(l="ts_hint"),'<a href="'+t+'" class="ts_contact '+l+" clear_fix"+(i?1!=i?" ts_contact_mobile":" ts_contact_online":"")+'" id="ts_contact'+e+'" onclick="return TopSearch.select(this, event, '+c+');" onmousedown="event.cancelBubble = true;" onmouseover="TopSearch.itemOver(this, 1, event);"  onmouseout="TopSearch.itemOver(this, 0, event);"><span class="ts_contact_photo fl_l" '+s+'><img src="'+o+'"/></span><span class="ts_contact_name fl_l">'+n+'</span><span class="ts_contact_status fl_l"></span></a>'},prepareRows:function(e){var t=[],o=total=10,n=!1,i=ge("ts_cont_wrap"),a=geByClass1("active",i),r=a?a.id:"";if(!i)return!1;if(cur.tsStr&&cur.tsStr==e)return!1;if(e&&o--,each({apps:1,events:1,publics:2,groups:4,friends:10},function(n,i){if(TopSearch[n+"Cache"]){var a=TopSearch.listSearch(e,n,i),r=[];for(var s in a){if(!o||o<total-i)break;r.push(a[s]),o--}r.reverse();for(var s in r)t.push(r[s])}}),e){var s=e.length>17?e.substr(0,15)+"..":e;t.push('<a href="/search?c[section]=auto&c[q]='+encodeURIComponent(e)+'" class="ts_search_link clear_fix active" id="ts_search_link" onclick="return TopSearch.select(this, event);" onmousedown="event.cancelBubble = true;" onmouseover="TopSearch.itemOver(this, 1, event);"><span class="ts_contact_name fl_l">'+getLang("top_search").replace("{query}",'<span class="ts_query">'+clean(s)+"</span>")+'</span><span class="ts_contact_status fl_l"></span></a>')}if(TopSearch.friendsRows=i.innerHTML=t.reverse().join(""),window.tsHintsEnabled)if(clearTimeout(TopSearch.hintsTO),o&&e){if(TopSearch.hintsTO=setTimeout(this.hintsSearch.pbind(e,n,o),100),TopSearch.hintsRows)for(var c=ce("div",{innerHTML:TopSearch.hintsRows});c.firstChild&&o--;)i.appendChild(c.firstChild)}else o||(TopSearch.hintsRows="");(t||e)&&(cur.tsStr=e),r&&ge(r)&&addClass(ge(r),"active")},hintsSearch:function(q,re,limit){var tsInput=ge("ts_input"),tsWrap=ge("ts_cont_wrap"),curLink,activeId;Ajax.Send("/al_search.php",{act:"get_pages_hints",q:q,old:1},function(ajaxObj,response){if(trim(tsInput.getValue())!=q)return!1;try{response=eval("("+response+")")}catch(e){response=null}var pages=response.pages,elIds=[];if(each(geByClass("ts_hint",tsWrap),function(e,t){elIds.push(t.id)}),each(elIds,function(e,t){var o=ge(t);o.parentNode.removeChild(o)}),!pages)return TopSearch.hintsRows="",!1;var rows=[];each(pages,function(e){var t=intval(e),o=this[0],n=this[2];return ge("ts_contact"+t)?!0:limit--?(rows.push(TopSearch.row(t,n,this[1],o,!1,re,"hint")),!0):!1}),TopSearch.hintsRows=rows.join(""),curLink=geByClass1("active",tsWrap),activeId=curLink?curLink.id:"",tsWrap.innerHTML+=TopSearch.hintsRows,activeId&&ge(activeId)&&addClass(ge(activeId),"active")})},writeBox:function(e){return location.href="/im?sel="+e,!1}},nav={go:function(){return!0}};