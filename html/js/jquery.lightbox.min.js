function doLightBox(){var e,i,t="object"==typeof JQLBSettings,a=0;t&&JQLBSettings.slideshowSpeed&&(e=parseInt(JQLBSettings.slideshowSpeed)),t&&JQLBSettings.resizeSpeed&&(i=parseInt(JQLBSettings.resizeSpeed)),t&&JQLBSettings.marginSize&&(a=parseInt(JQLBSettings.marginSize));var n={help:" Browse images with your keyboard: Arrows or P(revious)/N(ext) and X/C/ESC for close.",prevLinkTitle:"previous image",nextLinkTitle:"next image",closeTitle:"close image gallery",image:"Image ",of:" of ",download:"Download",pause:"(pause slideshow)",play:"(play slideshow)"};jQuery('a[rel^="lightbox"]').lightbox({adminBarHeight:jQuery("#wpadminbar").height()||0,linkTarget:t&&JQLBSettings.linkTarget.length?JQLBSettings.linkTarget:"_self",showInfo:t&&"0"==JQLBSettings.showInfo?!1:!0,displayHelp:t&&JQLBSettings.help.length?!0:!1,marginSize:t&&a?a:0,fitToScreen:t&&"1"==JQLBSettings.fitToScreen?!0:!1,resizeSpeed:t&&i>=0?i:400,slidehowSpeed:t&&e>=0?e:4e3,displayDownloadLink:t&&"0"==JQLBSettings.displayDownloadLink?!1:!0,navbarOnTop:t&&"0"==JQLBSettings.navbarOnTop?!1:!0,strings:t&&"string"==typeof JQLBSettings.help?JQLBSettings:n})}!function(e){function t(e,i){var t,a,n;for(e=e.split("."),i=i.split("."),a=Math.min(e.length,i.length),t=0;a>t;t++)if(n=parseInt(e[t],10)-parseInt(i[t],10),0!==n)return n;return e.length-i.length}e.fn.lightbox=function(a){function n(){return r(),s(this),!1}function r(){e(window).bind("orientationchange",o),e(window).bind("resize",o),e("#overlay").remove(),e("#lightbox").remove(),k.isIE8=d(),k.inprogress=!1,k.auto=-1;var i=k.strings,t='<div id="outerImageContainer"><div id="imageContainer"><iframe id="lightboxIframe" /><img id="lightboxImage"><div id="hoverNav"><a href="javascript://" title="'+i.prevLinkTitle+'" id="prevLink"></a><a href="javascript://" id="nextLink" title="'+i.nextLinkTitle+'"></a></div><div id="jqlb_loading"><a href="javascript://" id="loadingLink"><div id="jqlb_spinner"></div></a></div></div></div>',a='<div id="imageDataContainer" class="clearfix"><div id="imageData"><div id="imageDetails"><span id="caption"></span><p id="controls"><span id="numberDisplay"></span> <span id="downloadLink"><a href="" target="'+k.linkTarget+'">'+i.download+'</a></span></p></div><div id="bottomNav">';k.displayHelp&&(a+='<span id="helpDisplay">'+i.help+"</span>"),a+='<a href="javascript://" id="bottomNavClose" title="'+i.closeTitle+'"><div id="jqlb_closelabel"></div></a></div></div></div>';var n;k.navbarOnTop?(n='<div id="overlay"></div><div id="lightbox">'+a+t+"</div>",e("body").append(n),e("#imageDataContainer").addClass("ontop")):(n='<div id="overlay"></div><div id="lightbox">'+t+a+"</div>",e("body").append(n)),e("#overlay").click(function(){x()}).hide(),e("#lightbox").click(function(){x()}).hide(),e("#loadingLink").click(function(){return x(),!1}),e("#bottomNavClose").click(function(){return x(),!1}),e("#outerImageContainer").width(k.widthCurrent).height(k.heightCurrent),e("#imageDataContainer").width(k.widthCurrent),k.imageClickClose||(e("#lightboxImage").click(function(){return!1}),e("#hoverNav").click(function(){return!1}))}function o(e){k.resizeTimeout&&(clearTimeout(k.resizeTimeout),k.resizeTimeout=!1),k.resizeTimeout=setTimeout(function(){p()},50)}function l(){var i=e(document).height();k.isIE8&&i>4096&&(i=4096);var t=e(window).height()-k.adminBarHeight;return new Array(e(document).width(),i,e(window).width(),t,e(document).height())}function d(){var e=!1;if(document.createElement){var i=document.createElement("div");i&&i.querySelectorAll&&(i.innerHTML='<object><param name=""></object>',e=1!=i.querySelectorAll("param").length),i=null}return e}function g(){var i=0,t=0;return self.pageYOffset?(t=self.pageYOffset,i=self.pageXOffset):document.documentElement&&document.documentElement.scrollTop?(t=document.documentElement.scrollTop,i=document.documentElement.scrollLeft):document.body&&(t=document.body.scrollTop,i=document.body.scrollLeft),k.adminBarHeight&&0===parseInt(e("#wpadminbar").css("top"),10)&&(t+=k.adminBarHeight),new Array(i,t)}function s(t){var a=l(),n=g(),r=0;e("#overlay").hide().css({width:a[0]+"px",height:a[1]+"px",opacity:k.overlayOpacity}).fadeIn(400),k.isIE8&&4096==a[1]&&n[1]>=1e3&&(r=n[1]-1e3,a[4]-(n[1]+3096)<0&&(r-=n[1]+3096-a[4]),e("#overlay").css({top:r+"px"}));var o=0,d=[];if(k.downloads={},e("a").each(function(){if(this.href&&this.rel==t.rel){var i="",a="",n="",r=e(this),o=r.children("img:first-child");if(this.title?i=this.title:o.attr("title")?i=o.attr("title"):o.attr("alt")&&(i=o.attr("alt")),r.parent().next(".gallery-caption").html()){var l=r.parent().next(".gallery-caption");a=l.html(),n=l.text()}else r.next(".wp-caption-text").html()&&(a=r.next(".wp-caption-text").html(),n=r.next(".wp-caption-text").text());i=e.trim(i),n=e.trim(n).replace("&#8217;","&#039;").replace("â€™","'"),i.toLowerCase()==n.toLowerCase()&&(i=a,a="");var g="";""!=i&&(g='<span id="titleText">'+i+"</span>"),""!=a&&(""!=i&&(g+="<br />"),g+='<span id="captionText">'+a+"</span>"),(k.displayDownloadLink||r.attr("data-download"))&&(k.downloads[d.length]=r.attr("data-download")),d.push(new Array(this.href,k.displayTitle?g:"",d.length))}}),d.length>1){for(i=0;i<d.length;i++)for(j=d.length-1;j>i;j--)d[i][0]==d[j][0]&&d.splice(j,1);for(;d[o][0]!=t.href;)o++}k.imageArray=d,h(n[1],n[0]).show(),c(o),I()}function h(i,t){return k.resizeSpeed>0?e("#lightbox").animate({top:i+"px",left:t+"px"},250,"linear"):e("#lightbox").css({top:i+"px",left:t+"px"})}function c(i){0==k.inprogress&&(k.inprogress=!0,k.activeImage=i,e("#jqlb_loading").show(),e("#lightboxImage").hide(),e("#hoverNav").hide(),e("#prevLink").hide(),e("#nextLink").hide(),m())}function m(){k.imgPreloader=new Image,k.imgPreloader.onload=function(){e("#lightboxImage").attr("src",k.imageArray[k.activeImage][0]),p(),w()},k.imgPreloader.src=k.imageArray[k.activeImage][0]}function p(){if(k.imgPreloader){var i=k.imgPreloader.width,t=k.imgPreloader.height,a=l(),n=a[2]<a[0]?a[0]:a[2];e("#overlay").css({width:n+"px",height:a[1]+"px"});var r=a[3]-(e("#imageDataContainer").height()+2*k.borderSize),o=a[2]-2*k.borderSize;if(k.fitToScreen){var d=r-k.marginSize,s=o-k.marginSize;e(window).width()>500&&(d-=k.marginSize,s-=k.marginSize);var h=1;t>d&&(h=d/t),i*=h,t*=h,h=1,i>s&&(h=s/i),i=Math.round(i*h),t=Math.round(t*h)}var c=g(),m=c[1]+.5*r,p=m-.5*t,v=c[0];e("#lightboxImage").width(i).height(t),u(i,t,p,v)}}function u(i,t,a,n){k.widthCurrent=e("#outerImageContainer").outerWidth(),k.heightCurrent=e("#outerImageContainer").outerHeight();var r=Math.max(300,i+2*k.borderSize),o=t+2*k.borderSize;k.xScale=r/k.widthCurrent*100,k.yScale=o/k.heightCurrent*100,h(a,n),y(),e("#imageDataContainer").animate({width:r},k.resizeSpeed,"linear"),e("#outerImageContainer").animate({width:r,height:o},k.resizeSpeed,"linear",function(){v()}),k.imageArray.length>1&&(e("#hoverNav").show(),e("#prevLink").show(),e("#nextLink").show()),e("#prevLink,#nextLink").height(t)}function v(){e("#imageData").show(),e("#caption").show(),e("#jqlb_loading").hide(),k.resizeSpeed>0?e("#lightboxImage").fadeIn("fast",function(){f()}):(e("#lightboxImage").show(),f()),k.inprogress=!1}function f(){-1!=k.auto&&(clearTimeout(k.auto),k.auto=setTimeout(function(){c(k.activeImage==k.imageArray.length-1?0:k.activeImage+1)},k.slidehowSpeed)),S()}function w(){k.imageArray.length>1?(preloadNextImage=new Image,preloadNextImage.src=k.imageArray[k.activeImage==k.imageArray.length-1?0:k.activeImage+1][0],preloadPrevImage=new Image,preloadPrevImage.src=k.imageArray[0==k.activeImage?k.imageArray.length-1:k.activeImage-1][0]):(k.imageArray.length-1>k.activeImage&&(preloadNextImage=new Image,preloadNextImage.src=k.imageArray[k.activeImage+1][0]),k.activeImage>0&&(preloadPrevImage=new Image,preloadPrevImage.src=k.imageArray[k.activeImage-1][0]))}function y(){e("#numberDisplay").html(""),e("#caption").html("").hide();var i=k.imageArray,t=k.strings,a=k.activeImage,n=i[a][2];i[a][1]&&k.showInfo&&e("#caption").html(i[a][1]).show();var r=i.length>1&&k.showInfo?t.image+(a+1)+t.of+i.length:"";if(k.slidehowSpeed&&i.length>1){var o=-1===k.auto?t.play:t.pause;r+=' <a id="playpause" href="#">'+o+"</a>"}if(k.displayDownloadLink||k.downloads[n]){var l=k.downloads[n]?k.downloads[n]:i[a][0];e("#downloadLink").show().children().attr("href",l)}else e("#downloadLink").hide();""!=r&&e("#numberDisplay").html(r).show()}function I(){k.imageArray.length>1&&(e("#prevLink").click(function(){return c(0==k.activeImage?k.imageArray.length-1:k.activeImage-1),!1}),e("#nextLink").click(function(){return c(k.activeImage==k.imageArray.length-1?0:k.activeImage+1),!1}),e.fn.touchwipe&&e("#imageContainer").touchwipe({wipeLeft:function(){c(k.activeImage==k.imageArray.length-1?0:k.activeImage+1)},wipeRight:function(){c(0==k.activeImage?k.imageArray.length-1:k.activeImage-1)},min_move_x:20,preventDefaultEvents:!0}),k.slidehowSpeed&&e("#numberDisplay").unbind("click").click(function(){return-1!=k.auto?(e(this).children("a").text(k.strings.play),clearTimeout(k.auto),k.auto=-1):(e(this).children("a").text(k.strings.pause),k.auto=setTimeout(function(){c(k.activeImage==k.imageArray.length-1?0:k.activeImage+1)},k.slidehowSpeed)),!1}),S())}function x(){L(),clearTimeout(k.auto),k.auto=-1,e("#lightbox").hide(),e("#overlay").fadeOut()}function b(e){var i=e.data.opts,t=e.keyCode,a=27,n=String.fromCharCode(t).toLowerCase();return"x"==n||"o"==n||"c"==n||t==a?x():"p"==n||37==t?(L(),c(0==i.activeImage?i.imageArray.length-1:i.activeImage-1)):("n"==n||39==t)&&(L(),c(i.activeImage==i.imageArray.length-1?0:i.activeImage+1)),!1}function S(){e(document).unbind("keydown").bind("keydown",{opts:k},b)}function L(){e(document).unbind("keydown")}var k=e.extend({},e.fn.lightbox.defaults,a);return e("#overlay").is(":visible")&&e(window).trigger("resize"),t(e.fn.jquery,"1.7")>0?e(this).on("click",n):e(this).live("click",n)},e.fn.lightbox.defaults={showInfo:!1,adminBarHeight:0,overlayOpacity:.8,borderSize:10,imageArray:new Array,activeImage:null,inprogress:!1,widthCurrent:250,heightCurrent:250,xScale:1,yScale:1,displayTitle:!0,imageClickClose:!0,followScroll:!1,isIE8:!1},e(document).ready(doLightBox)}(jQuery);